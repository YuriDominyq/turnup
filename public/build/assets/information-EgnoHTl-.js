import{r as a,j as e,H as ee}from"./app-BFUxpgc-.js";import{d as E}from"./index-Bq4pgK-e.js";import{C as x,a as M,b as w,c as h}from"./card-BdYlrJDE.js";import{I as v}from"./input-u6KC3-lO.js";import{c as se,B as t}from"./app-logo-icon-hWkjKAQy.js";import{S as ae}from"./scroll-area-Bh2D-71f.js";import{B as I}from"./badge-BYa5jGfV.js";import{a as te,i as P,T as r,X as re,y as N}from"./app-layout-CFNL6j-t.js";import{L as b}from"./label-ByxK6oCC.js";import{c as K}from"./createLucideIcon-JbUv9LaR.js";import{P as le}from"./plus-Dux9YFFq.js";import{S as ie}from"./search-NHZw2s_c.js";import{T as ne}from"./trash-2-DT7u0kn-.js";/* empty css            */import"./index-RN0Tnwo-.js";import"./index-CeamqMYW.js";import"./index-BdQq_4o_.js";import"./users-CgbDWmvy.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],_=K("Pen",ce);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],B=K("Save",oe),R=a.forwardRef(({className:C,...d},m)=>e.jsx("textarea",{className:se("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",C),ref:m,...d}));R.displayName="Textarea";const de=[{title:"FAQs",href:"/information"}];function Qe({faqs:C}){const[d,m]=a.useState(C),[p,k]=a.useState(""),[j,S]=a.useState(""),[f,A]=a.useState(""),[l,q]=a.useState(null),[c,V]=a.useState(""),[D,o]=a.useState(!1),[$,g]=a.useState(null),[F,Q]=a.useState(""),[u,L]=a.useState(null),[H,T]=a.useState(null),z=d.filter(s=>s.question.toLowerCase().includes(c.toLowerCase())||s.answer.toLowerCase().includes(c.toLowerCase())||s.category.toLowerCase().includes(c.toLowerCase())||s.keywords?.toLowerCase().includes(c.toLowerCase())).sort((s,i)=>i.id-s.id),X=Array.from(new Set(d.map(s=>s.category))),y=()=>{k(""),S(""),A(""),Q(""),q(null)},U=()=>{if(!p.trim()||!j.trim()||!f.trim()){N.error("Please fill out all fields!");return}o(!0);const s={question:p.trim(),answer:j.trim(),category:f.trim(),keywords:F.trim()};l!==null?E.Inertia.put(route("operator.faq.update",l),s,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{m(i=>i.map(n=>n.id===l?{...n,...s}:n)),g(l),y(),N.success("FAQ updated successfully!"),o(!1),setTimeout(()=>g(null),2e3)},onError:()=>o(!1)}):E.Inertia.post(route("operator.faq.store"),s,{preserveState:!0,preserveScroll:!0,onSuccess:i=>{const{faq:n}=i.props;n?(m(Z=>[...Z,n]),g(n.id),y(),N.success("FAQ added successfully!"),o(!1),setTimeout(()=>g(null),2e3)):o(!1)},onError:()=>o(!1)})},G=s=>{q(s.id),k(s.question),S(s.answer),A(s.category),Q(s.keywords||""),window.scrollTo({top:0,behavior:"smooth"})},J=s=>L(s),O=()=>{u&&E.Inertia.delete(route("operator.faq.destroy",u.id),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{m(s=>s.filter(i=>i.id!==u.id)),N.success("FAQ deleted successfully!"),L(null)}})},W=()=>T({id:l,question:p,answer:j,category:f,keywords:F}),Y=()=>{U(),T(null)};return e.jsxs(te,{breadcrumbs:de,children:[e.jsx(ee,{title:"FAQs"}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2.5 bg-primary rounded-xl",children:e.jsx(P,{className:"h-6 w-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx(r,{size:"xl",weight:"bold",className:"text-gray-900 dark:text-gray-100",children:"FAQ Management"}),e.jsx(r,{size:"sm",className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage frequently asked questions for the commuter chatbot"})]})]}),e.jsxs(I,{variant:"secondary",className:"text-sm px-3 py-1",children:[d.length," Total FAQs"]})]}),e.jsxs(x,{children:[e.jsx(M,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(w,{className:"flex items-center gap-2",children:l!==null?e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"h-5 w-5"})," Edit FAQ"]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"h-5 w-5"})," Add New FAQ"]})}),l!==null&&e.jsxs(t,{variant:"ghost",size:"sm",onClick:y,children:[e.jsx(re,{className:"h-4 w-4 mr-1"})," Cancel"]})]})}),e.jsxs(h,{className:"space-y-4 pt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:"Question *"}),e.jsx(v,{value:p,onChange:s=>k(s.target.value),placeholder:"Enter the question..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:"Category *"}),e.jsx(v,{value:f,onChange:s=>A(s.target.value),placeholder:"e.g., Routes, Fares, Schedule",list:"categories"}),e.jsx("datalist",{id:"categories",children:X.map(s=>e.jsx("option",{value:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:"Answer *"}),e.jsx(R,{value:j,onChange:s=>S(s.target.value),placeholder:"Enter the answer..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:"Keywords (comma-separated)"}),e.jsx(v,{value:F,onChange:s=>Q(s.target.value),placeholder:"e.g., bus, train, payment"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[l!==null?e.jsxs(t,{onClick:W,disabled:D,children:[e.jsx(B,{className:"h-4 w-4 mr-2"})," Update FAQ"]}):e.jsxs(t,{onClick:U,disabled:D,children:[e.jsx(B,{className:"h-4 w-4 mr-2"})," Add FAQ"]}),l!==null&&e.jsx(t,{variant:"outline",onClick:y,children:"Cancel"})]})]})]}),e.jsxs(x,{children:[e.jsx(M,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs(w,{children:["FAQ List (",z.length,")"]}),e.jsxs("div",{className:"relative w-full sm:w-80",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(v,{value:c,onChange:s=>V(s.target.value),placeholder:"Search FAQs...",className:"pl-10"})]})]})}),e.jsx(h,{className:"pt-6",children:z.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(P,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx(r,{size:"lg",weight:"medium",children:"No FAQs found"}),e.jsx(r,{size:"sm",className:"mt-1",children:c?"Try adjusting your search":"Add your first FAQ to get started"})]}):e.jsx(ae,{className:"h-[600px] pr-4",children:e.jsx("div",{className:"space-y-3",children:z.map(s=>e.jsx(x,{className:`transition-all duration-300 hover:shadow-md ${$===s.id?"bg-blue-50 dark:bg-blue-950/30 border-blue-300 dark:border-blue-700 shadow-md":"border-gray-200 dark:border-gray-700"}`,children:e.jsx(h,{className:"p-5",children:e.jsxs("div",{className:"flex justify-between items-start gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(I,{variant:"outline",className:"mt-0.5",children:s.category}),e.jsx("div",{className:"flex-1",children:e.jsx(r,{size:"base",weight:"bold",children:s.question})})]}),e.jsx(r,{size:"sm",children:s.answer}),s.keywords&&e.jsx("div",{className:"flex flex-wrap gap-1.5 pt-1",children:s.keywords.split(",").map((i,n)=>e.jsx(I,{variant:"secondary",className:"px-2 py-0.5",children:i.trim()},n))})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>G(s),className:"w-full",children:[e.jsx(_,{className:"h-3.5 w-3.5 mr-1.5"})," Edit"]}),e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>J(s),className:"w-full",children:[e.jsx(ne,{className:"h-3.5 w-3.5 mr-1.5"})," Delete"]})]})]})})},s.id))})})})]})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs(x,{className:"max-w-md w-full p-6",children:[e.jsx(w,{children:"Confirm Delete"}),e.jsxs(h,{className:"space-y-4",children:[e.jsx(r,{children:"Are you sure you want to delete the FAQ:"}),e.jsx(r,{weight:"bold",children:u.question}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(t,{variant:"outline",onClick:()=>L(null),children:"Cancel"}),e.jsx(t,{variant:"destructive",onClick:O,children:"Delete"})]})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs(x,{className:"max-w-md w-full p-6",children:[e.jsx(w,{children:"Confirm Update"}),e.jsxs(h,{className:"space-y-4",children:[e.jsx(r,{children:"Are you sure you want to update this FAQ?"}),e.jsx(r,{weight:"bold",children:H.question}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(t,{variant:"outline",onClick:()=>T(null),children:"Cancel"}),e.jsx(t,{onClick:Y,children:"Update"})]})]})]})})]})}export{Qe as default};
