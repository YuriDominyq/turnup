import{r as a,j as e,H as Y}from"./app-wGMpwwbA.js";import{P as H,T as Z,S as P,d as z}from"./textarea-BmXvzcwV.js";import{C as m,a as B,b as f,c as u}from"./card-Y3IWTBMG.js";import{I as y}from"./input-DSFpinUz.js";import{B as t}from"./app-logo-icon-C2LKKL1T.js";import{S as ee}from"./scroll-area-CO-ptgIU.js";import{B as E}from"./badge-7jBCnXRU.js";import{A as se,C as K,T as r,X as ae,y as w}from"./app-layout-BwXWNlEO.js";import{L as N}from"./label-CKphbhrD.js";import{P as te}from"./plus-t1hO0g6p.js";import{S as re}from"./search-CcfXnbfm.js";import{T as le}from"./trash-2-BDF9CDsC.js";/* empty css            */import"./createLucideIcon-EvbFA9wc.js";import"./index-DKjA42uE.js";import"./index-D4mus6u0.js";import"./index-BdQq_4o_.js";import"./chevron-right-6omdm5mM.js";const ie=[{title:"FAQs",href:"/information"}];function Se({faqs:M}){const[v,C]=a.useState(M),[x,b]=a.useState(""),[h,S]=a.useState(""),[p,A]=a.useState(""),[l,I]=a.useState(null),[c,R]=a.useState(""),[q,o]=a.useState(!1),[X,j]=a.useState(null),[k,F]=a.useState(""),[d,Q]=a.useState(null),[D,T]=a.useState(null),L=v.filter(s=>s.question.toLowerCase().includes(c.toLowerCase())||s.answer.toLowerCase().includes(c.toLowerCase())||s.category.toLowerCase().includes(c.toLowerCase())||s.keywords?.toLowerCase().includes(c.toLowerCase())).sort((s,i)=>i.id-s.id),_=Array.from(new Set(v.map(s=>s.category))),g=()=>{b(""),S(""),A(""),F(""),I(null)},U=()=>{if(!x.trim()||!h.trim()||!p.trim()){w.error("Please fill out all fields!");return}o(!0);const s={question:x.trim(),answer:h.trim(),category:p.trim(),keywords:k.trim()};l!==null?z.Inertia.put(route("operator.faq.update",l),s,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{C(i=>i.map(n=>n.id===l?{...n,...s}:n)),j(l),g(),w.success("FAQ updated successfully!"),o(!1),setTimeout(()=>j(null),2e3)},onError:()=>o(!1)}):z.Inertia.post(route("operator.faq.store"),s,{preserveState:!0,preserveScroll:!0,onSuccess:i=>{const{faq:n}=i.props;n?(C(W=>[...W,n]),j(n.id),g(),w.success("FAQ added successfully!"),o(!1),setTimeout(()=>j(null),2e3)):o(!1)},onError:()=>o(!1)})},$=s=>{I(s.id),b(s.question),S(s.answer),A(s.category),F(s.keywords||""),window.scrollTo({top:0,behavior:"smooth"})},G=s=>Q(s),J=()=>{d&&z.Inertia.delete(route("operator.faq.destroy",d.id),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{C(s=>s.filter(i=>i.id!==d.id)),w.success("FAQ deleted successfully!"),Q(null)}})},O=()=>T({id:l,question:x,answer:h,category:p,keywords:k}),V=()=>{U(),T(null)};return e.jsxs(se,{breadcrumbs:ie,children:[e.jsx(Y,{title:"FAQs"}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2.5 bg-primary rounded-xl",children:e.jsx(K,{className:"h-6 w-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx(r,{size:"xl",weight:"bold",className:"text-gray-900 dark:text-gray-100",children:"FAQ Management"}),e.jsx(r,{size:"sm",className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage frequently asked questions for the commuter chatbot"})]})]}),e.jsxs(E,{variant:"secondary",className:"text-sm px-3 py-1",children:[v.length," Total FAQs"]})]}),e.jsxs(m,{children:[e.jsx(B,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(f,{className:"flex items-center gap-2",children:l!==null?e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"h-5 w-5"})," Edit FAQ"]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-5 w-5"})," Add New FAQ"]})}),l!==null&&e.jsxs(t,{variant:"ghost",size:"sm",onClick:g,children:[e.jsx(ae,{className:"h-4 w-4 mr-1"})," Cancel"]})]})}),e.jsxs(u,{className:"space-y-4 pt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Question *"}),e.jsx(y,{value:x,onChange:s=>b(s.target.value),placeholder:"Enter the question..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Category *"}),e.jsx(y,{value:p,onChange:s=>A(s.target.value),placeholder:"e.g., Routes, Fares, Schedule",list:"categories"}),e.jsx("datalist",{id:"categories",children:_.map(s=>e.jsx("option",{value:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Answer *"}),e.jsx(Z,{value:h,onChange:s=>S(s.target.value),placeholder:"Enter the answer..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"Keywords (comma-separated)"}),e.jsx(y,{value:k,onChange:s=>F(s.target.value),placeholder:"e.g., bus, train, payment"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[l!==null?e.jsxs(t,{onClick:O,disabled:q,children:[e.jsx(P,{className:"h-4 w-4 mr-2"})," Update FAQ"]}):e.jsxs(t,{onClick:U,disabled:q,children:[e.jsx(P,{className:"h-4 w-4 mr-2"})," Add FAQ"]}),l!==null&&e.jsx(t,{variant:"outline",onClick:g,children:"Cancel"})]})]})]}),e.jsxs(m,{children:[e.jsx(B,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs(f,{children:["FAQ List (",L.length,")"]}),e.jsxs("div",{className:"relative w-full sm:w-80",children:[e.jsx(re,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(y,{value:c,onChange:s=>R(s.target.value),placeholder:"Search FAQs...",className:"pl-10"})]})]})}),e.jsx(u,{className:"pt-6",children:L.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(K,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx(r,{size:"lg",weight:"medium",children:"No FAQs found"}),e.jsx(r,{size:"sm",className:"mt-1",children:c?"Try adjusting your search":"Add your first FAQ to get started"})]}):e.jsx(ee,{className:"h-[600px] pr-4",children:e.jsx("div",{className:"space-y-3",children:L.map(s=>e.jsx(m,{className:`transition-all duration-300 hover:shadow-md ${X===s.id?"bg-blue-50 dark:bg-blue-950/30 border-blue-300 dark:border-blue-700 shadow-md":"border-gray-200 dark:border-gray-700"}`,children:e.jsx(u,{className:"p-5",children:e.jsxs("div",{className:"flex justify-between items-start gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(E,{variant:"outline",className:"mt-0.5",children:s.category}),e.jsx("div",{className:"flex-1",children:e.jsx(r,{size:"base",weight:"bold",children:s.question})})]}),e.jsx(r,{size:"sm",children:s.answer}),s.keywords&&e.jsx("div",{className:"flex flex-wrap gap-1.5 pt-1",children:s.keywords.split(",").map((i,n)=>e.jsx(E,{variant:"secondary",className:"px-2 py-0.5",children:i.trim()},n))})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>$(s),className:"w-full",children:[e.jsx(H,{className:"h-3.5 w-3.5 mr-1.5"})," Edit"]}),e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>G(s),className:"w-full",children:[e.jsx(le,{className:"h-3.5 w-3.5 mr-1.5"})," Delete"]})]})]})})},s.id))})})})]})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs(m,{className:"max-w-md w-full p-6",children:[e.jsx(f,{children:"Confirm Delete"}),e.jsxs(u,{className:"space-y-4",children:[e.jsx(r,{children:"Are you sure you want to delete the FAQ:"}),e.jsx(r,{weight:"bold",children:d.question}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(t,{variant:"outline",onClick:()=>Q(null),children:"Cancel"}),e.jsx(t,{variant:"destructive",onClick:J,children:"Delete"})]})]})]})}),D&&e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs(m,{className:"max-w-md w-full p-6",children:[e.jsx(f,{children:"Confirm Update"}),e.jsxs(u,{className:"space-y-4",children:[e.jsx(r,{children:"Are you sure you want to update this FAQ?"}),e.jsx(r,{weight:"bold",children:D.question}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(t,{variant:"outline",onClick:()=>T(null),children:"Cancel"}),e.jsx(t,{onClick:V,children:"Update"})]})]})]})})]})}export{Se as default};
