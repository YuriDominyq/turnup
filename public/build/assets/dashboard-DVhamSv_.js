import{j as e,r as n,a as $,H as G}from"./app-DTM1__vL.js";import{T as L,A as K}from"./app-layout-h3XymxNa.js";import{c as X}from"./createLucideIcon-DaOfuS5_.js";import{C as v,a as T,b as D,c as j}from"./card-CztBwbVn.js";import{c as q}from"./index-CQDF8FZs.js";import{P as A}from"./index--RS4-4ve.js";import{c as p,B as x}from"./app-logo-icon-CDQTXQxO.js";import{U as J}from"./users-CdWpsFnz.js";import{T as Q}from"./trending-up-BYQyBszn.js";import{B as P}from"./badge-Dsym7T43.js";import{R}from"./refresh-cw-D0PIiJik.js";import{F as W}from"./filter-EWjXqOWr.js";/* empty css            */import"./circle-help-CfcFk89E.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],k=X("Activity",Y);function Z(){return e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-primary rounded-xl",children:e.jsx(k,{className:"h-6 w-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx(L,{size:"xl",weight:"bold",children:"Terminal Operations Dashboard"}),e.jsx(L,{size:"sm",weight:"normal",children:"Real-time monitoring and analytics for terminal operations"})]})]})})})}var b="Progress",N=100,[ee,Pe]=q(b),[se,ae]=ee(b),M=n.forwardRef((s,t)=>{const{__scopeProgress:r,value:l=null,max:i,getValueLabel:m=te,...c}=s;(i||i===0)&&!S(i)&&console.error(re(`${i}`,"Progress"));const o=S(i)?i:N;l!==null&&!C(l,o)&&console.error(le(`${l}`,"Progress"));const d=C(l,o)?l:null,h=f(d)?m(d,o):void 0;return e.jsx(se,{scope:r,value:d,max:o,children:e.jsx(A.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":f(d)?d:void 0,"aria-valuetext":h,role:"progressbar","data-state":U(d,o),"data-value":d??void 0,"data-max":o,...c,ref:t})})});M.displayName=b;var _="ProgressIndicator",E=n.forwardRef((s,t)=>{const{__scopeProgress:r,...l}=s,i=ae(_,r);return e.jsx(A.div,{"data-state":U(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...l,ref:t})});E.displayName=_;function te(s,t){return`${Math.round(s/t*100)}%`}function U(s,t){return s==null?"indeterminate":s===t?"complete":"loading"}function f(s){return typeof s=="number"}function S(s){return f(s)&&!isNaN(s)&&s>0}function C(s,t){return f(s)&&!isNaN(s)&&s<=t&&s>=0}function re(s,t){return`Invalid prop \`max\` of value \`${s}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${N}\`.`}function le(s,t){return`Invalid prop \`value\` of value \`${s}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${N} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var z=M,ie=E;const F=n.forwardRef(({className:s,value:t,...r},l)=>e.jsx(z,{ref:l,className:p("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...r,children:e.jsx(ie,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));F.displayName=z.displayName;const I=({title:s,value:t,icon:r,progress:l})=>e.jsxs(v,{className:"rounded-2xl shadow-sm",children:[e.jsxs(T,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(D,{className:"text-sm font-medium",children:s}),e.jsx(r,{className:"h-4 w-4"})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.toLocaleString()}),l!==void 0&&e.jsx("div",{className:"mt-3",children:e.jsx(F,{value:l,className:"h-2"})})]})]});function ne(){const[s,t]=n.useState({totalUsers:0,totalRoutes:0});n.useEffect(()=>{$.get("/api/admin/kpi").then(c=>{t({totalUsers:c.data.totalCommuters,totalRoutes:c.data.totalRoutes})}).catch(c=>console.error(c))},[]);const r=2e3,l=50,i=Math.round(s.totalUsers/r*100),m=Math.round(s.totalRoutes/l*100);return e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(I,{title:"Total Commuters",value:s.totalUsers,icon:J,progress:i}),e.jsx(I,{title:"Total Routes",value:s.totalRoutes,icon:Q,progress:m})]})}const oe=({logs:s,onClose:t})=>e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-background rounded-lg shadow-lg w-[90%] max-w-2xl max-h-[80%] overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Full System Logs"}),e.jsx("button",{className:"text-muted-foreground",onClick:t,children:"âœ•"})]}),e.jsx("div",{className:"space-y-2",children:s.map(r=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors",children:[e.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${r.type==="login"||r.type==="login"?"bg-green-500 animate-pulse":r.type==="logout"?"bg-yellow-500":r.type==="error"?"bg-red-500 animate-pulse":r.type==="create"?"bg-blue-500 animate-pulse":r.type==="update"?"bg-indigo-500":r.type==="delete"?"bg-rose-500":"bg-muted-foreground"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:r.title}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:r.description})]}),e.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:new Date(r.created_at).toLocaleString()})]},r.id))})]})});function de(){const[s,t]=n.useState("overview"),[r,l]=n.useState(!1),[i,m]=n.useState([]),[c,o]=n.useState(!1),[d,h]=n.useState(null),[O,y]=n.useState(!1),[V,H]=n.useState(!0),w=[{id:"overview",label:"Overview"}],g=async()=>{try{const u=(await $.get("https://turnup-admin.com/api/system-logs")).data.systemLogs;u.length>0&&u[0].id!==d&&(o(!0),h(u[0].id),setTimeout(()=>o(!1),2e3)),m(u)}catch(a){console.error("Error fetching logs:",a)}finally{H(!1),l(!1)}},B=async()=>{l(!0),await g()};return n.useEffect(()=>{const a=setInterval(()=>{g()},5e3);return g(),()=>clearInterval(a)}),V?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(R,{className:"h-8 w-8 animate-spin mx-auto text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading dashboard"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(v,{children:e.jsx(j,{className:"p-4",children:e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("div",{role:"tablist","aria-label":"Super Admin Sections",className:"hidden sm:flex items-center gap-1 bg-muted p-1 rounded-lg",children:w.map(a=>e.jsx(x,{role:"tab","aria-selected":s===a.id,"aria-controls":`${a.id}-panel`,onClick:()=>t(a.id),size:"sm",variant:s===a.id?"default":"ghost",className:p("transition-all",s===a.id&&"bg-primary text-primary-foreground shadow-sm"),children:a.label},a.id))}),e.jsx("select",{className:"sm:hidden flex-1 rounded-md border border-input bg-background px-3 py-2 text-sm",value:s,onChange:a=>t(a.target.value),"aria-label":"Select analytics section",children:w.map(a=>e.jsx("option",{value:a.id,children:a.label},a.id))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"hidden sm:inline-flex bg-green-500 text-white",children:"Live Updates"}),e.jsx(x,{variant:"ghost",size:"sm",onClick:B,disabled:r,"aria-label":"Refresh data",children:e.jsx(R,{className:p("h-4 w-4",r&&"animate-spin")})}),e.jsxs(x,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"Filters"})]})]})]})})})}),e.jsxs("div",{role:"tabpanel",id:`${s}-panel`,"aria-labelledby":`${s}-tab`,children:[s==="overview"&&e.jsx("div",{className:"space-y-6",children:e.jsxs(v,{children:[e.jsx(T,{className:"pb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(D,{className:"text-lg font-bold",children:"System Logs"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Recent system events and activity logs"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(P,{variant:"outline",className:"gap-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${c?"bg-green-500 animate-pulse":"bg-green-500"}`}),"Real-time"]}),e.jsxs(x,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>y(!0),children:["View Full Logs",e.jsx(k,{className:"h-4 w-4"})]})]})]})}),e.jsx(j,{className:"pt-4",children:e.jsx("div",{className:"space-y-3",children:i.slice(0,5).map(a=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors",children:[e.jsx("div",{className:p("w-2 h-2 rounded-full flex-shrink-0",a.type==="login"?"bg-green-500 animate-pulse":a.type==="logout"?"bg-yellow-500":a.type==="error"?"bg-red-500 animate-pulse":a.type==="create"?"bg-blue-500 animate-pulse":a.type==="update"?"bg-indigo-500":a.type==="delete"?"bg-rose-500":"bg-muted-foreground")}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:a.title}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:a.description})]}),e.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:new Date(a.created_at).toLocaleString()})]},a.id))})})]})}),O&&e.jsx(oe,{logs:i,onClose:()=>y(!1)})]})]})}const ce=[{title:"Dashboard",href:"/admin/dashboard"}];function Re(){return e.jsxs(K,{breadcrumbs:ce,children:[e.jsx(G,{title:"Dashboard"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-8 rounded-xl p-4 lg:p-8 overflow-x-auto min-h-screen",children:[e.jsx(Z,{}),e.jsx(ne,{}),e.jsx(de,{}),e.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-blue-600/5 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-600/5 rounded-full blur-3xl animate-pulse delay-1000"}),"j"]})]})]})}export{Re as default};
