import{r as h,j as e,a as R,c as k,H as De}from"./app-DP4ezg8H.js";import{e as q,R as _e,f as Se,P as Pe,W as Re,C as Ee,g as Te,D as ke,h as H,O as Le,b as Fe,d as Me,c as Be,y as E,a as Oe,T as z}from"./app-layout-B_Q2w-v5.js";import{B as $e}from"./badge-CJuspi0H.js";import{C as V,a as J,b as G,d as Ie,c as W}from"./card-D0mFAEvS.js";import{u as Q,b as ze,c as A,d as X,B as j}from"./app-logo-icon-B4JouYoi.js";import{c as Ue,a as qe}from"./index-r-NUmtg3.js";import{U as Y}from"./users-CgKwNFc1.js";import{M as He}from"./mail-00Xf1msj.js";import{P as Ve}from"./phone-DDBN-mOr.js";import{M as Je}from"./map-pin-Cv2r7iE3.js";import{S as Ge,u as M,w as We}from"./xlsx-CVFyC8WE.js";import{E as Qe}from"./eye-CwtCvqps.js";import{c as T}from"./createLucideIcon-CcyNiaCO.js";import{T as Xe}from"./trash-2-HxPdJtFs.js";import{I as b}from"./input-CEAqJ2k2.js";import{S as B,a as O,b as $,c as I,d as y}from"./select-DCF61xfU.js";import{S as Ye}from"./search-BPrHrtVH.js";import{F as Ze}from"./filter-CLAyoPK-.js";import{D as Ke}from"./download-CxnVULN8.js";import{D as es,e as ss,a as ts,b as as,c as rs,f as os}from"./dialog-Dy4IIMK5.js";import{L as N}from"./label-BVsNQDxk.js";import{U as ns}from"./user-2ifyTNoE.js";import{C as v}from"./circle-alert-GSYHkhEY.js";import{C as ls}from"./car-2wIaEU_r.js";import{P as is}from"./plus-DiV0DFCn.js";import{C as cs}from"./clock-B_2_9y_0.js";/* empty css            */import"./index-BES3TvRs.js";import"./index-BdQq_4o_.js";import"./index-DWYyEkNH.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ms=T("ArrowLeft",ds);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],hs=T("ArrowRight",ps);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Z=T("CircleCheckBig",us);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],fs=T("SquarePen",xs);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],js=T("UserCheck",gs);var K="AlertDialog",[vs,wt]=Ue(K,[q]),w=q(),ee=a=>{const{__scopeAlertDialog:o,...t}=a,n=w(o);return e.jsx(_e,{...n,...t,modal:!0})};ee.displayName=K;var Ns="AlertDialogTrigger",se=h.forwardRef((a,o)=>{const{__scopeAlertDialog:t,...n}=a,i=w(t);return e.jsx(Se,{...i,...n,ref:o})});se.displayName=Ns;var ys="AlertDialogPortal",te=a=>{const{__scopeAlertDialog:o,...t}=a,n=w(o);return e.jsx(Pe,{...n,...t})};te.displayName=ys;var ws="AlertDialogOverlay",ae=h.forwardRef((a,o)=>{const{__scopeAlertDialog:t,...n}=a,i=w(t);return e.jsx(Le,{...i,...n,ref:o})});ae.displayName=ws;var S="AlertDialogContent",[bs,As]=vs(S),Cs=ze("AlertDialogContent"),re=h.forwardRef((a,o)=>{const{__scopeAlertDialog:t,children:n,...i}=a,p=w(t),l=h.useRef(null),u=Q(o,l),x=h.useRef(null);return e.jsx(Re,{contentName:S,titleName:oe,docsSlug:"alert-dialog",children:e.jsx(bs,{scope:t,cancelRef:x,children:e.jsxs(Ee,{role:"alertdialog",...p,...i,ref:u,onOpenAutoFocus:qe(i.onOpenAutoFocus,r=>{r.preventDefault(),x.current?.focus({preventScroll:!0})}),onPointerDownOutside:r=>r.preventDefault(),onInteractOutside:r=>r.preventDefault(),children:[e.jsx(Cs,{children:n}),e.jsx(_s,{contentRef:l})]})})})});re.displayName=S;var oe="AlertDialogTitle",ne=h.forwardRef((a,o)=>{const{__scopeAlertDialog:t,...n}=a,i=w(t);return e.jsx(Te,{...i,...n,ref:o})});ne.displayName=oe;var le="AlertDialogDescription",ie=h.forwardRef((a,o)=>{const{__scopeAlertDialog:t,...n}=a,i=w(t);return e.jsx(ke,{...i,...n,ref:o})});ie.displayName=le;var Ds="AlertDialogAction",ce=h.forwardRef((a,o)=>{const{__scopeAlertDialog:t,...n}=a,i=w(t);return e.jsx(H,{...i,...n,ref:o})});ce.displayName=Ds;var de="AlertDialogCancel",me=h.forwardRef((a,o)=>{const{__scopeAlertDialog:t,...n}=a,{cancelRef:i}=As(de,t),p=w(t),l=Q(o,i);return e.jsx(H,{...p,...n,ref:l})});me.displayName=de;var _s=({contentRef:a})=>{const o=`\`${S}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${S}\` by passing a \`${le}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${S}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return h.useEffect(()=>{document.getElementById(a.current?.getAttribute("aria-describedby"))||console.warn(o)},[o,a]),null},Ss=ee,Ps=se,Rs=te,pe=ae,he=re,ue=ce,xe=me,fe=ne,ge=ie;const Es=Ss,Ts=Ps,ks=Rs,je=h.forwardRef(({className:a,...o},t)=>e.jsx(pe,{className:A("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...o,ref:t}));je.displayName=pe.displayName;const ve=h.forwardRef(({className:a,...o},t)=>e.jsxs(ks,{children:[e.jsx(je,{}),e.jsx(he,{ref:t,className:A("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...o})]}));ve.displayName=he.displayName;const Ne=({className:a,...o})=>e.jsx("div",{className:A("flex flex-col space-y-2 text-center sm:text-left",a),...o});Ne.displayName="AlertDialogHeader";const ye=({className:a,...o})=>e.jsx("div",{className:A("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...o});ye.displayName="AlertDialogFooter";const we=h.forwardRef(({className:a,...o},t)=>e.jsx(fe,{ref:t,className:A("text-lg font-semibold",a),...o}));we.displayName=fe.displayName;const be=h.forwardRef(({className:a,...o},t)=>e.jsx(ge,{ref:t,className:A("text-sm text-muted-foreground",a),...o}));be.displayName=ge.displayName;const Ae=h.forwardRef(({className:a,...o},t)=>e.jsx(ue,{ref:t,className:A(X(),a),...o}));Ae.displayName=ue.displayName;const Ce=h.forwardRef(({className:a,...o},t)=>e.jsx(xe,{ref:t,className:A(X({variant:"outline"}),"mt-2 sm:mt-0",a),...o}));Ce.displayName=xe.displayName;const Ls=(a,o)=>`${a?.charAt(0)||""}${o?.charAt(0)||""}`.toUpperCase();function Fs({filteredDrivers:a,getStatusBadge:o,onUpdateDriver:t}){const n=async l=>{try{await R.delete(`/operator/driver/${l}`),t({drivers_id:l}),E.success("Delete Driver Successfully")}catch(u){console.error("Failed to delete driver",u)}},i=async l=>{try{const u=await R.post(`/operator/driver/${l}/approve`);t(u.data.driver),E.success("Approve Driver Successfully")}catch(u){console.error("Failed to approve driver",u)}},p=async l=>{try{const u=await R.post(`/operator/driver/${l}/reject`);t(u.data.driver),E.success("Reject Driver Successfully")}catch(u){console.error("Failed to reject driver",u)}};return a.length===0?e.jsxs("div",{className:"p-12 text-center text-muted-foreground",children:[e.jsx(Y,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No drivers found matching your search or filter"})]}):e.jsxs(V,{children:[e.jsxs(J,{children:[e.jsxs(G,{children:["Jeepney Drivers (",a.length,")"]}),e.jsx(Ie,{children:"Manage modernized jeepney drivers and route assignments"})]}),e.jsx(W,{children:e.jsx("div",{className:"space-y-4",children:a.map(l=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(Fe,{className:"h-12 w-12",children:[e.jsx(Me,{src:l.avatar_url}),e.jsx(Be,{className:"bg-primary text-primary-foreground",children:Ls(l.first_name,l.last_name)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h3",{className:"font-semibold",children:[l.first_name," ",l.last_name]}),e.jsx($e,{className:o(l.status).color,children:l.status})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(He,{className:"h-3 w-3"}),l.email]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ve,{className:"h-3 w-3"}),l.phone]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Je,{className:"h-3 w-3"}),l.route?.first_terminal," ↔ ",l.route?.second_terminal]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"text-sm font-medium",children:l.license_plate})}),l.status==="active"&&e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ge,{className:"h-3 w-3 text-yellow-500"}),e.jsx("span",{className:"text-sm font-medium",children:l.rating})]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(j,{variant:"ghost",size:"sm",children:e.jsx(Qe,{className:"h-4 w-4"})}),e.jsx(j,{variant:"ghost",size:"sm",children:e.jsx(fs,{className:"h-4 w-4"})}),e.jsxs(Es,{children:[e.jsx(Ts,{asChild:!0,children:e.jsx(j,{variant:"ghost",size:"sm",children:e.jsx(Xe,{className:"h-4 w-4"})})}),e.jsxs(ve,{children:[e.jsxs(Ne,{children:[e.jsx(we,{children:"Delete Driver Account"}),e.jsxs(be,{children:["Are you sure you want to delete ",l.first_name," ",l.last_name,"'s account? This action cannot be undone."]})]}),e.jsxs(ye,{children:[e.jsx(Ce,{children:"Cancel"}),e.jsx(Ae,{onClick:()=>n(l.drivers_id),children:"Delete"})]})]})]}),l.status==="pending"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{variant:"default",size:"sm",onClick:()=>i(l.drivers_id),children:"Approve"}),e.jsx(j,{variant:"destructive",size:"sm",onClick:()=>p(l.drivers_id),children:"Reject"})]})]})]})]},l.drivers_id))})})]})}function Ms({searchQuery:a,setSearchQuery:o,selectedStatus:t,setSelectedStatus:n,onExport:i}){return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(b,{placeholder:"Search drivers by name, route, or terminal...",value:a,onChange:p=>o(p.target.value),className:"pl-10"})]}),e.jsxs(B,{value:t,onValueChange:n,children:[e.jsxs(O,{className:"w-48",children:[e.jsx(Ze,{className:"h-4 w-4 mr-2"}),e.jsx($,{})]}),e.jsxs(I,{children:[e.jsx(y,{value:"all",children:"All Status"}),e.jsx(y,{value:"active",children:"Active"}),e.jsx(y,{value:"pending",children:"Pending"}),e.jsx(y,{value:"suspended",children:"Suspended"}),e.jsx(y,{value:"inactive",children:"Inactive"})]})]}),e.jsxs(j,{variant:"outline",onClick:i,children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Export"]})]})}function L({title:a,icon:o,count:t,description:n}){return e.jsxs(V,{children:[e.jsxs(J,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(G,{className:"text-sm font-medium",children:a}),o]}),e.jsxs(W,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t}),e.jsx("p",{className:"text-xs text-muted-foreground",children:n})]})]})}const Bs=({currentStep:a,totalSteps:o})=>e.jsx("div",{className:"flex items-center justify-center mb-6",children:Array.from({length:o},(t,n)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${n<=a?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:n+1}),n<o-1&&e.jsx("div",{className:`w-12 h-0.5 mx-2 ${n<a?"bg-primary":"bg-muted"}`})]},n))}),Os=({newDriver:a,setNewDriver:o})=>{const[t,n]=h.useState({}),[i,p]=h.useState({}),l=(r,c)=>{let m="";switch(r){case"firstName":c.trim()?c.trim().length<2&&(m="Name must be at least 2 characters"):m="First name is required";break;case"lastName":c.trim()?c.trim().length<2&&(m="Name must be at least 2 characters"):m="Last name is required";break;case"email":c.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c)||(m="Please enter a valid email address"):m="Email is required";break;case"phone":c.trim()?/^(\+63|0)?[0-9]{10}$/.test(c.replace(/\s+/g,""))||(m="Please enter a valid Philippine phone number"):m="Phone number is required";break;case"password":c?c.length<8?m="Password must be at least 8 characters":/(?=.*[a-zA-Z])(?=.*[0-9])/.test(c)||(m="Password must contain both letters and numbers"):m="Password is required";break;case"confirmPassword":c?c!==a.password&&(m="Passwords do not match"):m="Please confirm your password";break}return m},u=r=>{p({...i,[r]:!0});const c=l(r,a[r]);n({...t,[r]:c})},x=(r,c)=>{if(o({...a,[r]:c}),i[r]){const m=l(r,c);n({...t,[r]:m})}if(r==="password"&&i.confirmPassword){const m=l("confirmPassword",a.confirmPassword);n({...t,[r]:"",confirmPassword:m})}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ns,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Personal Information"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"firstName",children:"First Name *"}),e.jsx(b,{id:"firstName",value:a.firstName,onChange:r=>x("firstName",r.target.value),onBlur:()=>u("firstName"),placeholder:"Enter first name",className:t.firstName&&i.firstName?"border-red-500 focus-visible:ring-red-500":""}),t.firstName&&i.firstName&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-500",children:[e.jsx(v,{className:"h-3 w-3"}),e.jsx("span",{children:t.firstName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(b,{id:"lastName",value:a.lastName,onChange:r=>x("lastName",r.target.value),onBlur:()=>u("lastName"),placeholder:"Enter last name",className:t.lastName&&i.lastName?"border-red-500 focus-visible:ring-red-500":""}),t.lastName&&i.lastName&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-500",children:[e.jsx(v,{className:"h-3 w-3"}),e.jsx("span",{children:t.lastName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"email",children:"Email Address *"}),e.jsx(b,{id:"email",type:"email",value:a.email,onChange:r=>x("email",r.target.value),onBlur:()=>u("email"),placeholder:"Enter email address",className:t.email&&i.email?"border-red-500 focus-visible:ring-red-500":""}),t.email&&i.email&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-500",children:[e.jsx(v,{className:"h-3 w-3"}),e.jsx("span",{children:t.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(b,{id:"phone",value:a.phone,onChange:r=>x("phone",r.target.value),onBlur:()=>u("phone"),placeholder:"+63 917 123 4567",className:t.phone&&i.phone?"border-red-500 focus-visible:ring-red-500":""}),t.phone&&i.phone&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-500",children:[e.jsx(v,{className:"h-3 w-3"}),e.jsx("span",{children:t.phone})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"password",children:"Password *"}),e.jsx(b,{id:"password",type:"password",value:a.password,onChange:r=>x("password",r.target.value),onBlur:()=>u("password"),placeholder:"Create password",className:t.password&&i.password?"border-red-500 focus-visible:ring-red-500":""}),t.password&&i.password?e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-500",children:[e.jsx(v,{className:"h-3 w-3"}),e.jsx("span",{children:t.password})]}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"Min. 8 characters with letters and numbers"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"confirmPassword",children:"Confirm Password *"}),e.jsx(b,{id:"confirmPassword",type:"password",value:a.confirmPassword,onChange:r=>x("confirmPassword",r.target.value),onBlur:()=>u("confirmPassword"),placeholder:"Confirm password",className:t.confirmPassword&&i.confirmPassword?"border-red-500 focus-visible:ring-red-500":""}),t.confirmPassword&&i.confirmPassword&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-500",children:[e.jsx(v,{className:"h-3 w-3"}),e.jsx("span",{children:t.confirmPassword})]})]})]})},$s=({newDriver:a,setNewDriver:o})=>{const[t,n]=h.useState({}),[i,p]=h.useState({}),[l,u]=h.useState([]);h.useEffect(()=>{R.get("/routes").then(s=>u(s.data)).catch(s=>console.error(s))},[]);const x=(s,d)=>{let f="";switch(s){case"vehicleType":(!d||d.trim()==="")&&(f="Please select a jeepney type.");break;case"licensePlate":d.trim()?/^[A-Z]{2,3}-?\d{3,4}$/i.test(d.replace(/\s+/g,""))||(f="Invalid license plate format."):f="License plate is required.";break;case"route":(!d||d.trim()==="")&&(f="Please select a route assignment.");break}return f},r=s=>{p({...i,[s]:!0});const d=x(s,a[s]);n({...t,[s]:d})},c=(s,d)=>{if(o({...a,[s]:d}),i[s]){const f=x(s,d);n({...t,[s]:f})}},m=(s,d)=>{o({...a,[s]:d}),p({...i,[s]:!0});const f=x(s,d);n({...t,[s]:f})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ls,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Vehicle & Route Details"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"vehicleType",children:"Jeepney Type *"}),e.jsxs(B,{value:a.vehicleType,onValueChange:s=>m("vehicleType",s),children:[e.jsx(O,{className:t.vehicleType&&i.vehicleType?"border-red-500 focus:ring-red-500":"",children:e.jsx($,{placeholder:"Select jeepney type"})}),e.jsxs(I,{children:[e.jsx(y,{value:"modern-jeepney",children:"Modern Jeepney (Electric)"}),e.jsx(y,{value:"euro4-jeepney",children:"Euro 4 Jeepney"}),e.jsx(y,{value:"mini-bus",children:"Mini Bus"})]})]}),t.vehicleType&&i.vehicleType&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-500",children:[e.jsx(v,{className:"h-3 w-3"}),e.jsx("span",{children:t.vehicleType})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"licensePlate",children:"License Plate *"}),e.jsx(b,{id:"licensePlate",value:a.licensePlate,onChange:s=>c("licensePlate",s.target.value.toUpperCase()),onBlur:()=>r("licensePlate"),placeholder:"BAC-1234",maxLength:8,className:t.licensePlate&&i.licensePlate?"border-red-500 focus-visible:ring-red-500":""}),t.licensePlate&&i.licensePlate&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-500",children:[e.jsx(v,{className:"h-3 w-3"}),e.jsx("span",{children:t.licensePlate})]}),!t.licensePlate&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Format: ABC-1234 or AB-1234"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"route",children:"Assigned Route *"}),e.jsxs(B,{value:a.route,onValueChange:s=>m("route",s),children:[e.jsx(O,{className:t.route&&i.route?"border-red-500 focus:ring-red-500":"",children:e.jsx($,{placeholder:"Select route assignment"})}),e.jsx(I,{children:l.map(s=>e.jsxs(y,{value:s.id.toString(),children:[s.first_terminal," ↔ ",s.second_terminal]},s.id))})]}),t.route&&i.route&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-500",children:[e.jsx(v,{className:"h-3 w-3"}),e.jsx("span",{children:t.route})]})]})]})},Is=({onRegister:a})=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-6",children:[e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("div",{className:"absolute h-36 w-36 bg-green-100 rounded-full"}),e.jsx(Z,{className:"h-28 w-28 text-green-600 relative"})]}),e.jsx("h2",{className:"text-3xl font-bold text-green-700 text-center",children:"Driver is Ready to Register"}),e.jsx(j,{size:"lg",onClick:a,children:"Register Driver"})]}),zs=({onCreateDriver:a})=>{const[o,t]=h.useState(!1),[n,i]=h.useState(0),[p,l]=h.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",vehicleType:"",licensePlate:"",route:""}),u=async s=>{try{const d=new FormData;d.append("first_name",s.firstName),d.append("last_name",s.lastName),d.append("email",s.email),d.append("phone",s.phone),d.append("password",s.password),d.append("password_confirmation",s.confirmPassword),d.append("vehicle_type",s.vehicleType),d.append("license_plate",s.licensePlate),d.append("route_id",s.route),await R.post("/operator/driver",d,{headers:{"Content-Type":"multipart/form-data"}}),E.success("Driver Created Successfully"),a(s),t(!1),i(0)}catch(d){console.error(d),E.error("Error Creating Driver")}},x=()=>{n<2&&i(n+1)},r=()=>{n>0&&i(n-1)},c=s=>{switch(s){case 0:return p.firstName&&p.lastName&&p.email&&p.phone&&p.password&&p.confirmPassword;case 1:return p.vehicleType&&p.licensePlate&&p.route;case 2:return!0;default:return!1}},m=()=>{switch(n){case 0:return e.jsx(Os,{newDriver:p,setNewDriver:l});case 1:return e.jsx($s,{newDriver:p,setNewDriver:l});case 2:return e.jsx(Is,{newDriver:p,onRegister:()=>u(p)});default:return null}};return e.jsxs(es,{open:o,onOpenChange:t,children:[e.jsx(ss,{asChild:!0,children:e.jsxs(j,{children:[e.jsx(is,{className:"h-4 w-4 mr-2"}),"Add New Driver"]})}),e.jsxs(ts,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs(as,{children:[e.jsx(rs,{children:"Register New Jeepney Driver"}),e.jsx(os,{children:"Complete the registration process in 3 simple steps"})]}),e.jsx(Bs,{currentStep:n,totalSteps:3}),m(),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx("div",{children:n>0&&n<2&&e.jsxs(j,{variant:"outline",onClick:r,children:[e.jsx(ms,{className:"h-4 w-4 mr-2"}),"Previous"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),n<2&&e.jsxs(j,{onClick:x,disabled:!c(n),children:["Next",e.jsx(hs,{className:"h-4 w-4 ml-2"})]})]})]})]})]})};var F={exports:{}},Us=F.exports,U;function qs(){return U||(U=1,(function(a,o){(function(t,n){n()})(Us,function(){function t(r,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r}function n(r,c,m){var s=new XMLHttpRequest;s.open("GET",r),s.responseType="blob",s.onload=function(){x(s.response,c,m)},s.onerror=function(){console.error("could not download file")},s.send()}function i(r){var c=new XMLHttpRequest;c.open("HEAD",r,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function p(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(c)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof k=="object"&&k.global===k?k:void 0,u=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),x=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(r,c,m){var s=l.URL||l.webkitURL,d=document.createElement("a");c=c||r.name||"download",d.download=c,d.rel="noopener",typeof r=="string"?(d.href=r,d.origin===location.origin?p(d):i(d.href)?n(r,c,m):p(d,d.target="_blank")):(d.href=s.createObjectURL(r),setTimeout(function(){s.revokeObjectURL(d.href)},4e4),setTimeout(function(){p(d)},0))}:"msSaveOrOpenBlob"in navigator?function(r,c,m){if(c=c||r.name||"download",typeof r!="string")navigator.msSaveOrOpenBlob(t(r,m),c);else if(i(r))n(r,c,m);else{var s=document.createElement("a");s.href=r,s.target="_blank",setTimeout(function(){p(s)})}}:function(r,c,m,s){if(s=s||open("","_blank"),s&&(s.document.title=s.document.body.innerText="downloading..."),typeof r=="string")return n(r,c,m);var d=r.type==="application/octet-stream",f=/constructor/i.test(l.HTMLElement)||l.safari,_=/CriOS\/[\d]+/.test(navigator.userAgent);if((_||d&&f||u)&&typeof FileReader<"u"){var C=new FileReader;C.onloadend=function(){var D=C.result;D=_?D:D.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=D:location=D,s=null},C.readAsDataURL(r)}else{var g=l.URL||l.webkitURL,P=g.createObjectURL(r);s?s.location=P:location.href=P,s=null,setTimeout(function(){g.revokeObjectURL(P)},4e4)}});l.saveAs=x.saveAs=x,a.exports=x})})(F)),F.exports}var Hs=qs();const Vs=[{title:"Driver",href:"/driver"}];function bt({drivers:a}){const[o,t]=h.useState(a),[n,i]=h.useState(""),[p,l]=h.useState("all"),u=s=>{const d={active:{variant:"default",color:"bg-green-100 text-green-800"},pending:{variant:"secondary",color:"bg-yellow-100 text-yellow-800"},suspended:{variant:"destructive",color:"bg-red-100 text-red-800"},inactive:{variant:"outline",color:"bg-gray-100 text-gray-800"}};return d[s]||d.inactive},x=s=>{console.log("Create Driver",s)},r=()=>{if(!o||o.length===0)return;const s=o.map(g=>({ID:g.drivers_id,"First Name":g.first_name,"Last Name":g.last_name,Email:g.email,Phone:g.phone||"",Status:g.status,Route:g.route?`${g.route.first_terminal} ↔ ${g.route.second_terminal}`:"","License Plate":g.license_plate,"Vehicle Type":g.vehicle_type||"",Rating:g.rating})),d=M.json_to_sheet(s),f=M.book_new();M.book_append_sheet(f,d,"Drivers");const _=We(f,{bookType:"xlsx",type:"array"}),C=new Blob([_],{type:"application/octet-stream"});Hs.saveAs(C,`drivers_export_${new Date().toISOString()}.xlsx`)},c=s=>{s&&(s.deleted?t(d=>d.filter(f=>f.drivers_id!==s.drivers_id)):t(d=>d.map(f=>f.drivers_id===s.drivers_id?s:f)))},m=o.filter(s=>{const d=s.first_name??"",f=s.last_name??"",_=s.email??"",C=s.phone??"",g=(s.status??"").toLowerCase(),P=d.toLowerCase().includes(n.toLowerCase())||f.toLowerCase().includes(n.toLowerCase())||_.toLowerCase().includes(n.toLowerCase())||C.includes(n),D=p==="all"||g===p.toLowerCase();return P&&D});return e.jsxs(Oe,{breadcrumbs:Vs,children:[e.jsx(De,{title:"Driver Management"}),e.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-primary rounded-xl",children:e.jsx(Y,{className:"h-6 w-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx(z,{size:"xl",weight:"bold",children:"Modern Jeepney Driver Management"}),e.jsx(z,{size:"sm",weight:"normal",children:"Manage modernized jeepney drivers in Bacolod City"})]})]}),e.jsx(zs,{onCreateDriver:x})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(L,{title:"Total Jeepney Drivers",icon:e.jsx(js,{className:"h-4 w-4 text-muted-foreground"}),count:a.length,description:"This includes all registered drivers"}),e.jsx(L,{title:"Active on Routes",icon:e.jsx(Z,{className:"h-4 w-4 text-green-500"}),count:a.filter(s=>s.status==="active").length,description:"Operating Routes"}),e.jsx(L,{title:"Pending Approval",icon:e.jsx(cs,{className:"h-4 w-4 text-yellow-500"}),count:a.filter(s=>s.status==="pending").length,description:"Awaiting verification"}),e.jsx(L,{title:"Issues",icon:e.jsx(v,{className:"h-4 w-4 text-red-400"}),count:a.filter(s=>s.status==="suspended").length,description:"Need Attention"})]}),e.jsx(Ms,{searchQuery:n,setSearchQuery:i,selectedStatus:p,setSelectedStatus:l,onExport:r}),e.jsx(Fs,{filteredDrivers:m,getStatusBadge:u,onUpdateDriver:c})]})]})}export{bt as default};
