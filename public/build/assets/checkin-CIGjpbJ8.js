import{r as f,j as e,H as _}from"./app-d9SgxdQS.js";import{A as T,T as p,e as L,f as D}from"./app-layout-LWcGx1ZE.js";import{C as n,a as i,b as d,c as m,B as A}from"./card-DYwXZ9vT.js";import{B as g}from"./app-logo-icon-CPYCTx_O.js";import{T as O,a as S,b as x,c as z}from"./tabs-_frZ-Ilg.js";import{S as M}from"./separator-D4pq7X-p.js";import{C as u}from"./circle-check-WUjtMRGZ.js";import{U as N}from"./user-BIg3jQbs.js";import{c as B}from"./createLucideIcon-C3SxUK1l.js";import{C as v}from"./circle-alert-BtFyji7p.js";import{C as H}from"./car-B11Rq-Ef.js";import{M as U}from"./map-pin-BJKHSU_Q.js";import{C as E}from"./clock-UGBvxiyS.js";/* empty css            */import"./index-BkHP6GWz.js";import"./index-BvyCzCKY.js";import"./users-Pwk57gk4.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],k=B("CircleX",X),$=[{title:"Driver Check-Ins",href:"/checkin"}];function le({checkIns:b}){const[l,j]=f.useState(b.map(s=>({id:s.driver.drivers_id,name:`${s.driver.first_name} ${s.driver.last_name}`,jeepneyNo:s.driver.license_plate,route:s.driver.route||{first_terminal:"-",second_terminal:"-"},lastCheckIn:s.check_in_time?new Date(s.check_in_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"-",status:s.status}))),[o,C]=f.useState("all"),w=s=>{j(r=>r.map(t=>t.id===s?{...t,status:"late"}:t))},y=s=>s.split(" ").map(r=>r[0]).join("").toUpperCase(),c=l.filter(s=>o==="all"||s.status===o),a={total:l.length,checkedIn:l.filter(s=>s.status==="checked-in").length,checkedOut:l.filter(s=>s.status==="not-checked-in").length,late:l.filter(s=>s.status==="late").length},I=({status:s})=>{const r={"checked-in":{className:"bg-green-100 text-green-800 hover:bg-green-100",icon:e.jsx(u,{className:"h-3 w-3 mr-1"}),label:"Checked In"},"not-checked-in":{className:"bg-red-100 text-red-800 hover:bg-red-100",icon:e.jsx(k,{className:"h-3 w-3 mr-1"}),label:"Checked Out"},late:{className:"bg-orange-100 text-orange-800 hover:bg-orange-100",icon:e.jsx(v,{className:"h-3 w-3 mr-1"}),label:"Late"}},t=r[s]||r["not-checked-in"];return e.jsxs(A,{variant:"secondary",className:t.className,children:[t.icon,t.label]})};return e.jsxs(T,{breadcrumbs:$,children:[e.jsx(_,{title:"Driver Check-Ins"}),e.jsx("div",{className:"min-h-screen bg-background py-8 px-4",children:e.jsxs("div",{className:"mx-auto space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-primary rounded-xl",children:e.jsx(u,{className:"h-6 w-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx(p,{size:"xl",weight:"bold",children:"Driver Check-Ins"}),e.jsx(p,{size:"sm",weight:"normal",children:"Monitor and manage driver attendance"})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Total Drivers"}),e.jsx(N,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active drivers today"})]})]}),e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Checked In"}),e.jsx(u,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.checkedIn}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"On time arrivals"})]})]}),e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Checked Out"}),e.jsx(k,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:a.checkedOut}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting check-in"})]})]}),e.jsxs(n,{children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Late"}),e.jsx(v,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:a.late}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Late arrivals"})]})]})]}),e.jsxs(O,{value:o,onValueChange:C,className:"w-full",children:[e.jsxs(S,{className:"grid w-full grid-cols-4",children:[e.jsxs(x,{value:"all",children:["All (",a.total,")"]}),e.jsxs(x,{value:"checked-in",children:["Checked In (",a.checkedIn,")"]}),e.jsxs(x,{value:"not-checked-in",children:["Checked Out (",a.checkedOut,")"]}),e.jsxs(x,{value:"late",children:["Late (",a.late,")"]})]}),e.jsx(z,{value:o,className:"mt-6",children:e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsx(d,{children:"Driver List"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[c.length," ",c.length===1?"driver":"drivers"," found"]})]}),e.jsxs(m,{className:"p-0",children:[c.map((s,r)=>e.jsxs("div",{children:[e.jsx("div",{className:"p-6 hover:bg-accent transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex gap-4 flex-1",children:[e.jsx(L,{className:"h-12 w-12",children:e.jsx(D,{className:"bg-primary text-primary-foreground",children:y(s.name)})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg leading-none mb-1",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:s.jeepneyNo})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(U,{className:"h-4 w-4 mt-0.5 text-muted-foreground flex-shrink-0"}),e.jsxs("span",{className:"text-muted-foreground",children:[s.route?.first_terminal," â†” ",s.route?.second_terminal]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(E,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-muted-foreground",children:["Last Check-In: ",e.jsx("span",{className:"font-medium text-foreground",children:s.lastCheckIn})]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-3",children:[e.jsx(I,{status:s.status}),s.status==="not-checked-in"&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(g,{size:"sm",variant:"outline",onClick:()=>j(t=>t.map(h=>h.id===s.id?{...h,status:"checked-in",lastCheckIn:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}:h)),children:"Mark as Checked-In"}),e.jsx(g,{size:"sm",variant:"outline",onClick:()=>w(s.id),children:"Mark as Late"})]})]})]})}),r<c.length-1&&e.jsx(M,{})]},s.id)),c.length===0&&e.jsxs("div",{className:"p-12 text-center text-muted-foreground",children:[e.jsx(N,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No drivers found with this status"})]})]})]})})]})]})})]})}export{le as default};
