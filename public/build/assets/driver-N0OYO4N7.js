import{r as p,j as e,a as k,H as Ce}from"./app-7orbPswd.js";import{e as q,R as Pe,f as De,P as _e,W as Se,C as Re,g as ke,D as Ee,h as H,O as Fe,b as Me,d as Te,c as Le,y as E,X as $e,a as Be,T as U}from"./app-layout-DCtVSz1K.js";import{C as G,a as J,b as V,d as ze,c as W,B as Ie}from"./card-BNGl58-u.js";import{u as Y,b as Oe,c as D,d as Z,B as v}from"./app-logo-icon-D3IDoRXy.js";import{c as Ue,a as qe}from"./index-vIlN5pYq.js";import{U as Q}from"./users-GPKOlYDW.js";import{M as He,P as Ge}from"./plus-Bxlx4TMX.js";import{c as S}from"./createLucideIcon-DmjkiFBQ.js";import{M as Je}from"./map-pin-xkw1Fyyv.js";import{S as Ve,u as L,w as We,F as Ye}from"./FileSaver.min-CTWHoG_f.js";import{E as Ze,T as Qe}from"./trash-2-CJNokogr.js";import{I as w}from"./input-DlIbn5Fn.js";import{S as $,a as B,b as z,c as I,d as A}from"./select-BmJ48QYB.js";import{S as Ke}from"./search-DKPT5ScB.js";import{F as Xe}from"./filter-BwRzmMCf.js";import{D as es}from"./download-D1UpCoD_.js";import{D as ss,e as as,a as ts,b as rs,c as ls,f as ns}from"./dialog-NQRICsCq.js";import{L as b}from"./label-dcLwpqB9.js";import{U as os}from"./user-Bi7I1rvJ.js";import{C as y}from"./circle-alert-DTOGtNGR.js";import{C as is}from"./car-5zOalgi-.js";import{U as cs}from"./upload-DCYgCGeq.js";import{C as ds}from"./clock-BEPdxaw_.js";/* empty css            */import"./index-DtNGVwYf.js";import"./index-DOOV7tOd.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ps=S("ArrowLeft",ms);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],xs=S("ArrowRight",hs);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],O=S("CircleCheckBig",us);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],gs=S("FileText",fs);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Ns=S("Phone",js);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ys=S("SquarePen",vs);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],bs=S("UserCheck",ws);var K="AlertDialog",[As,va]=Ue(K,[q]),C=q(),X=a=>{const{__scopeAlertDialog:r,...s}=a,l=C(r);return e.jsx(Pe,{...l,...s,modal:!0})};X.displayName=K;var Cs="AlertDialogTrigger",ee=p.forwardRef((a,r)=>{const{__scopeAlertDialog:s,...l}=a,n=C(s);return e.jsx(De,{...n,...l,ref:r})});ee.displayName=Cs;var Ps="AlertDialogPortal",se=a=>{const{__scopeAlertDialog:r,...s}=a,l=C(r);return e.jsx(_e,{...l,...s})};se.displayName=Ps;var Ds="AlertDialogOverlay",ae=p.forwardRef((a,r)=>{const{__scopeAlertDialog:s,...l}=a,n=C(s);return e.jsx(Fe,{...n,...l,ref:r})});ae.displayName=Ds;var R="AlertDialogContent",[_s,Ss]=As(R),Rs=Oe("AlertDialogContent"),te=p.forwardRef((a,r)=>{const{__scopeAlertDialog:s,children:l,...n}=a,m=C(s),o=p.useRef(null),x=Y(r,o),g=p.useRef(null);return e.jsx(Se,{contentName:R,titleName:re,docsSlug:"alert-dialog",children:e.jsx(_s,{scope:s,cancelRef:g,children:e.jsxs(Re,{role:"alertdialog",...m,...n,ref:x,onOpenAutoFocus:qe(n.onOpenAutoFocus,c=>{c.preventDefault(),g.current?.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[e.jsx(Rs,{children:l}),e.jsx(Es,{contentRef:o})]})})})});te.displayName=R;var re="AlertDialogTitle",le=p.forwardRef((a,r)=>{const{__scopeAlertDialog:s,...l}=a,n=C(s);return e.jsx(ke,{...n,...l,ref:r})});le.displayName=re;var ne="AlertDialogDescription",oe=p.forwardRef((a,r)=>{const{__scopeAlertDialog:s,...l}=a,n=C(s);return e.jsx(Ee,{...n,...l,ref:r})});oe.displayName=ne;var ks="AlertDialogAction",ie=p.forwardRef((a,r)=>{const{__scopeAlertDialog:s,...l}=a,n=C(s);return e.jsx(H,{...n,...l,ref:r})});ie.displayName=ks;var ce="AlertDialogCancel",de=p.forwardRef((a,r)=>{const{__scopeAlertDialog:s,...l}=a,{cancelRef:n}=Ss(ce,s),m=C(s),o=Y(r,n);return e.jsx(H,{...m,...l,ref:o})});de.displayName=ce;var Es=({contentRef:a})=>{const r=`\`${R}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${R}\` by passing a \`${ne}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${R}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{document.getElementById(a.current?.getAttribute("aria-describedby"))||console.warn(r)},[r,a]),null},Fs=X,Ms=ee,Ts=se,me=ae,pe=te,he=ie,xe=de,ue=le,fe=oe;const Ls=Fs,$s=Ms,Bs=Ts,ge=p.forwardRef(({className:a,...r},s)=>e.jsx(me,{className:D("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:s}));ge.displayName=me.displayName;const je=p.forwardRef(({className:a,...r},s)=>e.jsxs(Bs,{children:[e.jsx(ge,{}),e.jsx(pe,{ref:s,className:D("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r})]}));je.displayName=pe.displayName;const Ne=({className:a,...r})=>e.jsx("div",{className:D("flex flex-col space-y-2 text-center sm:text-left",a),...r});Ne.displayName="AlertDialogHeader";const ve=({className:a,...r})=>e.jsx("div",{className:D("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...r});ve.displayName="AlertDialogFooter";const ye=p.forwardRef(({className:a,...r},s)=>e.jsx(ue,{ref:s,className:D("text-lg font-semibold",a),...r}));ye.displayName=ue.displayName;const we=p.forwardRef(({className:a,...r},s)=>e.jsx(fe,{ref:s,className:D("text-sm text-muted-foreground",a),...r}));we.displayName=fe.displayName;const be=p.forwardRef(({className:a,...r},s)=>e.jsx(he,{ref:s,className:D(Z(),a),...r}));be.displayName=he.displayName;const Ae=p.forwardRef(({className:a,...r},s)=>e.jsx(xe,{ref:s,className:D(Z({variant:"outline"}),"mt-2 sm:mt-0",a),...r}));Ae.displayName=xe.displayName;const zs=(a,r)=>`${a?.charAt(0)||""}${r?.charAt(0)||""}`.toUpperCase();function Is({filteredDrivers:a,getStatusBadge:r,onUpdateDriver:s}){const l=async o=>{try{await k.delete(`/operator/driver/${o}`),s({drivers_id:o}),E.success("Delete Driver Successfully")}catch(x){console.error("Failed to delete driver",x)}},n=async o=>{try{const x=await k.post(`/operator/driver/${o}/approve`);s(x.data.driver),E.success("Approve Driver Successfully")}catch(x){console.error("Failed to approve driver",x)}},m=async o=>{try{const x=await k.post(`/operator/driver/${o}/reject`);s(x.data.driver),E.success("Reject Driver Successfully")}catch(x){console.error("Failed to reject driver",x)}};return a.length===0?e.jsxs("div",{className:"p-12 text-center text-muted-foreground",children:[e.jsx(Q,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No drivers found matching your search or filter"})]}):e.jsxs(G,{children:[e.jsxs(J,{children:[e.jsxs(V,{children:["Jeepney Drivers (",a.length,")"]}),e.jsx(ze,{children:"Manage modernized jeepney drivers and route assignments"})]}),e.jsx(W,{children:e.jsx("div",{className:"space-y-4",children:a.map(o=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(Me,{className:"h-12 w-12",children:[e.jsx(Te,{src:o.avatar_url}),e.jsx(Le,{className:"bg-primary text-primary-foreground",children:zs(o.first_name,o.last_name)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h3",{className:"font-semibold",children:[o.first_name," ",o.last_name]}),e.jsx(Ie,{className:r(o.status).color,children:o.status})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(He,{className:"h-3 w-3"}),o.email]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ns,{className:"h-3 w-3"}),o.phone]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Je,{className:"h-3 w-3"}),o.route?.first_terminal," ↔ ",o.route?.second_terminal]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"text-sm font-medium",children:o.license_plate})}),o.status==="active"&&e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ve,{className:"h-3 w-3 text-yellow-500"}),e.jsx("span",{className:"text-sm font-medium",children:o.rating})]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v,{variant:"ghost",size:"sm",children:e.jsx(Ze,{className:"h-4 w-4"})}),e.jsx(v,{variant:"ghost",size:"sm",children:e.jsx(ys,{className:"h-4 w-4"})}),e.jsxs(Ls,{children:[e.jsx($s,{asChild:!0,children:e.jsx(v,{variant:"ghost",size:"sm",children:e.jsx(Qe,{className:"h-4 w-4"})})}),e.jsxs(je,{children:[e.jsxs(Ne,{children:[e.jsx(ye,{children:"Delete Driver Account"}),e.jsxs(we,{children:["Are you sure you want to delete ",o.first_name," ",o.last_name,"'s account? This action cannot be undone."]})]}),e.jsxs(ve,{children:[e.jsx(Ae,{children:"Cancel"}),e.jsx(be,{onClick:()=>l(o.drivers_id),children:"Delete"})]})]})]}),o.status==="pending"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{variant:"default",size:"sm",onClick:()=>n(o.drivers_id),children:"Approve"}),e.jsx(v,{variant:"destructive",size:"sm",onClick:()=>m(o.drivers_id),children:"Reject"})]})]})]})]},o.drivers_id))})})]})}function Os({searchQuery:a,setSearchQuery:r,selectedStatus:s,setSelectedStatus:l,onExport:n}){return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ke,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(w,{placeholder:"Search drivers by name, route, or terminal...",value:a,onChange:m=>r(m.target.value),className:"pl-10"})]}),e.jsxs($,{value:s,onValueChange:l,children:[e.jsxs(B,{className:"w-48",children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),e.jsx(z,{})]}),e.jsxs(I,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"suspended",children:"Suspended"}),e.jsx(A,{value:"inactive",children:"Inactive"})]})]}),e.jsxs(v,{variant:"outline",onClick:n,children:[e.jsx(es,{className:"h-4 w-4 mr-2"}),"Export"]})]})}function M({title:a,icon:r,count:s,description:l}){return e.jsxs(G,{children:[e.jsxs(J,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:a}),r]}),e.jsxs(W,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s}),e.jsx("p",{className:"text-xs text-muted-foreground",children:l})]})]})}const Us=({currentStep:a,totalSteps:r})=>e.jsx("div",{className:"flex items-center justify-center mb-6",children:Array.from({length:r},(s,l)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${l<=a?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:l+1}),l<r-1&&e.jsx("div",{className:`w-12 h-0.5 mx-2 ${l<a?"bg-primary":"bg-muted"}`})]},l))}),qs=({newDriver:a,setNewDriver:r})=>{const[s,l]=p.useState({}),[n,m]=p.useState({}),o=(c,u)=>{let h="";switch(c){case"firstName":u.trim()?u.trim().length<2&&(h="Name must be at least 2 characters"):h="First name is required";break;case"lastName":u.trim()?u.trim().length<2&&(h="Name must be at least 2 characters"):h="Last name is required";break;case"email":u.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u)||(h="Please enter a valid email address"):h="Email is required";break;case"phone":u.trim()?/^(\+63|0)?[0-9]{10}$/.test(u.replace(/\s+/g,""))||(h="Please enter a valid Philippine phone number"):h="Phone number is required";break;case"password":u?u.length<8?h="Password must be at least 8 characters":/(?=.*[a-zA-Z])(?=.*[0-9])/.test(u)||(h="Password must contain both letters and numbers"):h="Password is required";break;case"confirmPassword":u?u!==a.password&&(h="Passwords do not match"):h="Please confirm your password";break}return h},x=c=>{m({...n,[c]:!0});const u=o(c,a[c]);l({...s,[c]:u})},g=(c,u)=>{if(r({...a,[c]:u}),n[c]){const h=o(c,u);l({...s,[c]:h})}if(c==="password"&&n.confirmPassword){const h=o("confirmPassword",a.confirmPassword);l({...s,[c]:"",confirmPassword:h})}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(os,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Personal Information"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"firstName",children:"First Name *"}),e.jsx(w,{id:"firstName",value:a.firstName,onChange:c=>g("firstName",c.target.value),onBlur:()=>x("firstName"),placeholder:"Enter first name",className:s.firstName&&n.firstName?"border-red-500 focus-visible:ring-red-500":""}),s.firstName&&n.firstName&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-500",children:[e.jsx(y,{className:"h-3 w-3"}),e.jsx("span",{children:s.firstName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(w,{id:"lastName",value:a.lastName,onChange:c=>g("lastName",c.target.value),onBlur:()=>x("lastName"),placeholder:"Enter last name",className:s.lastName&&n.lastName?"border-red-500 focus-visible:ring-red-500":""}),s.lastName&&n.lastName&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-500",children:[e.jsx(y,{className:"h-3 w-3"}),e.jsx("span",{children:s.lastName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"email",children:"Email Address *"}),e.jsx(w,{id:"email",type:"email",value:a.email,onChange:c=>g("email",c.target.value),onBlur:()=>x("email"),placeholder:"Enter email address",className:s.email&&n.email?"border-red-500 focus-visible:ring-red-500":""}),s.email&&n.email&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-500",children:[e.jsx(y,{className:"h-3 w-3"}),e.jsx("span",{children:s.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(w,{id:"phone",value:a.phone,onChange:c=>g("phone",c.target.value),onBlur:()=>x("phone"),placeholder:"+63 917 123 4567",className:s.phone&&n.phone?"border-red-500 focus-visible:ring-red-500":""}),s.phone&&n.phone&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-500",children:[e.jsx(y,{className:"h-3 w-3"}),e.jsx("span",{children:s.phone})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"password",children:"Password *"}),e.jsx(w,{id:"password",type:"password",value:a.password,onChange:c=>g("password",c.target.value),onBlur:()=>x("password"),placeholder:"Create password",className:s.password&&n.password?"border-red-500 focus-visible:ring-red-500":""}),s.password&&n.password?e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-500",children:[e.jsx(y,{className:"h-3 w-3"}),e.jsx("span",{children:s.password})]}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"Min. 8 characters with letters and numbers"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"confirmPassword",children:"Confirm Password *"}),e.jsx(w,{id:"confirmPassword",type:"password",value:a.confirmPassword,onChange:c=>g("confirmPassword",c.target.value),onBlur:()=>x("confirmPassword"),placeholder:"Confirm password",className:s.confirmPassword&&n.confirmPassword?"border-red-500 focus-visible:ring-red-500":""}),s.confirmPassword&&n.confirmPassword&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-500",children:[e.jsx(y,{className:"h-3 w-3"}),e.jsx("span",{children:s.confirmPassword})]})]})]})},Hs=({newDriver:a,setNewDriver:r})=>{const[s,l]=p.useState({}),[n,m]=p.useState({}),[o,x]=p.useState([]);p.useEffect(()=>{k.get("/routes").then(t=>x(t.data)).catch(t=>console.error(t))},[]);const g=(t,i)=>{let d="";switch(t){case"vehicleType":(!i||i.trim()==="")&&(d="Please select a jeepney type.");break;case"licensePlate":i.trim()?/^[A-Z]{2,3}-?\d{3,4}$/i.test(i.replace(/\s+/g,""))||(d="Invalid license plate format."):d="License plate is required.";break;case"route":(!i||i.trim()==="")&&(d="Please select a route assignment.");break}return d},c=t=>{m({...n,[t]:!0});const i=g(t,a[t]);l({...s,[t]:i})},u=(t,i)=>{if(r({...a,[t]:i}),n[t]){const d=g(t,i);l({...s,[t]:d})}},h=(t,i)=>{r({...a,[t]:i}),m({...n,[t]:!0});const d=g(t,i);l({...s,[t]:d})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(is,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Vehicle & Route Details"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"vehicleType",children:"Jeepney Type *"}),e.jsxs($,{value:a.vehicleType,onValueChange:t=>h("vehicleType",t),children:[e.jsx(B,{className:s.vehicleType&&n.vehicleType?"border-red-500 focus:ring-red-500":"",children:e.jsx(z,{placeholder:"Select jeepney type"})}),e.jsxs(I,{children:[e.jsx(A,{value:"modern-jeepney",children:"Modern Jeepney (Electric)"}),e.jsx(A,{value:"euro4-jeepney",children:"Euro 4 Jeepney"}),e.jsx(A,{value:"mini-bus",children:"Mini Bus"})]})]}),s.vehicleType&&n.vehicleType&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-500",children:[e.jsx(y,{className:"h-3 w-3"}),e.jsx("span",{children:s.vehicleType})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"licensePlate",children:"License Plate *"}),e.jsx(w,{id:"licensePlate",value:a.licensePlate,onChange:t=>u("licensePlate",t.target.value.toUpperCase()),onBlur:()=>c("licensePlate"),placeholder:"BAC-1234",maxLength:8,className:s.licensePlate&&n.licensePlate?"border-red-500 focus-visible:ring-red-500":""}),s.licensePlate&&n.licensePlate&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-500",children:[e.jsx(y,{className:"h-3 w-3"}),e.jsx("span",{children:s.licensePlate})]}),!s.licensePlate&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Format: ABC-1234 or AB-1234"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"route",children:"Assigned Route *"}),e.jsxs($,{value:a.route,onValueChange:t=>h("route",t),children:[e.jsx(B,{className:s.route&&n.route?"border-red-500 focus:ring-red-500":"",children:e.jsx(z,{placeholder:"Select route assignment"})}),e.jsx(I,{children:o.map(t=>e.jsxs(A,{value:t.id.toString(),children:[t.first_terminal," ↔ ",t.second_terminal]},t.id))})]}),s.route&&n.route&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-500",children:[e.jsx(y,{className:"h-3 w-3"}),e.jsx("span",{children:s.route})]})]})]})},Gs=({newDriver:a,setNewDriver:r})=>{const[s,l]=p.useState({}),[n,m]=p.useState({}),o=p.useRef(null),x=p.useRef(null),g=p.useRef(null),c=p.useRef(null),u=d=>["application/pdf","image/jpg","image/jpeg","image/png"].includes(d.type)?d.size>5242880?"File size exceeds the maximum limit of 5MB. Please upload a smaller file.":null:"Invalid file type. Only PDF, JPG, PNG are allowed.",h=(d,j)=>{if(!j)return;const N=u(j);if(N){m({...n,[d]:N});return}const f={...n};delete f[d],m(f);let P;j.type.startsWith("image/")&&(P=URL.createObjectURL(j)),l({...s,[d]:{file:j,preview:P}}),r({...a,documents:{...a.documents,[d]:j}})},t=d=>{const j={...s};j[d]?.preview&&URL.revokeObjectURL(j[d].preview),delete j[d],l(j);const N={...n};delete N[d],m(N);const f={...a.documents};delete f[d],r({...a,documents:f})},i=(d,j,N,f)=>{const P=s[N],_=n[N],F=!!P&&!_;return e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{ref:f,type:"file",accept:".pdf, .jpg, .jpeg, .png",className:"hidden",onChange:T=>h(N,T.target.files?.[0]||null)}),e.jsxs(v,{type:"button",variant:"outline",className:`h-16 w-full flex items-center justify-between gap-3 ${F?"border-green-500 bg-green-50":_?"border-red-500 bg-red-50":""}`,onClick:()=>f.current?.click(),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[F?e.jsx(O,{className:"h-5 w-5 text-green-600"}):_?e.jsx(y,{className:"h-5 w-5 text-red-600"}):e.jsx(cs,{className:"h-5 w-5"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:d}),e.jsx("div",{className:"text-xs text-muted-foreground",children:j})]})]}),F&&e.jsx(v,{type:"button",variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:T=>{T.stopPropagation(),t(N)},children:e.jsx($e,{className:"h-4 w-4"})})]}),F&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 pl-2",children:[e.jsx(O,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate",children:P?.file.name}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",(P.file.size/1024).toFixed(0)," KB)"]})]}),_&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 pl-2",children:[e.jsx(y,{className:"h-4 w-4"}),e.jsx("span",{children:_})]})]})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(gs,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Required Documents"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Upload the required documents. You can also upload these later from the driver profile."}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i("Professional Driver's License","PDF, JPG, PNG (Max 5MB)","driverLicense",o),i("Vehicle Registration (CR/OR)","PDF, JPG, PNG (Max 5MB)","vehicleRegistration",x),i("TPL Insurance","PDF, JPG, PNG (Max 5MB)","insurance",g),i("Franchise Certificate","PDF, JPG, PNG (Max 5MB)","franchise",c)]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," All documents are optional at this stage. You can upload them later, but having complete documentation helps speed up the approval process."]})})]})},Js=({onCreateDriver:a})=>{const[r,s]=p.useState(!1),[l,n]=p.useState(0),[m,o]=p.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",vehicleType:"",licensePlate:"",route:""}),x=async t=>{try{const i=new FormData;i.append("first_name",t.firstName),i.append("last_name",t.lastName),i.append("email",t.email),i.append("phone",t.phone),i.append("password",t.password),i.append("password_confirmation",t.confirmPassword),i.append("vehicle_type",t.vehicleType),i.append("license_plate",t.licensePlate),i.append("route_id",t.route),t.documents?.driverLicense&&i.append("driver_license",t.documents.driverLicense),t.documents?.vehicleRegistration&&i.append("vehicle_registration",t.documents.vehicleRegistration),t.documents?.insurance&&i.append("insurance",t.documents.insurance),t.documents?.franchise&&i.append("franchise",t.documents.franchise),await k.post("/operator/driver",i,{headers:{"Content-Type":"multipart/form-data"}}),E.success("Driver Creation Successfully"),a(t),s(!1),n(0)}catch(i){console.error(i),E.error("Error Driver Creation")}},g=()=>{l<2&&n(l+1)},c=()=>{l>0&&n(l-1)},u=t=>{switch(t){case 0:return m.firstName&&m.lastName&&m.email&&m.phone&&m.password&&m.confirmPassword;case 1:return m.vehicleType&&m.licensePlate&&m.route;case 2:return!0;default:return!1}},h=()=>{switch(l){case 0:return e.jsx(qs,{newDriver:m,setNewDriver:o});case 1:return e.jsx(Hs,{newDriver:m,setNewDriver:o});case 2:return e.jsx(Gs,{newDriver:m,setNewDriver:o});default:return null}};return e.jsxs(ss,{open:r,onOpenChange:s,children:[e.jsx(as,{asChild:!0,children:e.jsxs(v,{children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Add New Driver"]})}),e.jsxs(ts,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs(rs,{children:[e.jsx(ls,{children:"Register New Jeepney Driver"}),e.jsx(ns,{children:"Complete the registration process in 3 simple steps"})]}),e.jsx(Us,{currentStep:l,totalSteps:3}),h(),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx("div",{children:l>0&&e.jsxs(v,{variant:"outline",onClick:c,children:[e.jsx(ps,{className:"h-4 w-4 mr-2"}),"Previous"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(v,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),l<2?e.jsxs(v,{onClick:g,disabled:!u(l),children:["Next",e.jsx(xs,{className:"h-4 w-4 ml-2"})]}):e.jsx(v,{onClick:()=>x(m),children:"Register Driver"})]})]})]})]})},Vs=[{title:"Driver",href:"/driver"}];function ya({drivers:a}){const[r,s]=p.useState(a),[l,n]=p.useState(""),[m,o]=p.useState("all"),x=t=>{const i={active:{variant:"default",color:"bg-green-100 text-green-800"},pending:{variant:"secondary",color:"bg-yellow-100 text-yellow-800"},suspended:{variant:"destructive",color:"bg-red-100 text-red-800"},inactive:{variant:"outline",color:"bg-gray-100 text-gray-800"}};return i[t]||i.inactive},g=t=>{console.log("Create Driver",t)},c=()=>{if(!r||r.length===0)return;const t=r.map(f=>({ID:f.drivers_id,"First Name":f.first_name,"Last Name":f.last_name,Email:f.email,Phone:f.phone||"",Status:f.status,Route:f.route?`${f.route.first_terminal} ↔ ${f.route.second_terminal}`:"","License Plate":f.license_plate,"Vehicle Type":f.vehicle_type||"",Rating:f.rating})),i=L.json_to_sheet(t),d=L.book_new();L.book_append_sheet(d,i,"Drivers");const j=We(d,{bookType:"xlsx",type:"array"}),N=new Blob([j],{type:"application/octet-stream"});Ye.saveAs(N,`drivers_export_${new Date().toISOString()}.xlsx`)},u=t=>{t&&(t.deleted?s(i=>i.filter(d=>d.drivers_id!==t.drivers_id)):s(i=>i.map(d=>d.drivers_id===t.drivers_id?t:d)))},h=r.filter(t=>{const i=t.first_name??"",d=t.last_name??"",j=t.email??"",N=t.phone??"",f=(t.status??"").toLowerCase(),P=i.toLowerCase().includes(l.toLowerCase())||d.toLowerCase().includes(l.toLowerCase())||j.toLowerCase().includes(l.toLowerCase())||N.includes(l),_=m==="all"||f===m.toLowerCase();return P&&_});return e.jsxs(Be,{breadcrumbs:Vs,children:[e.jsx(Ce,{title:"Driver Management"}),e.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-primary rounded-xl",children:e.jsx(Q,{className:"h-6 w-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx(U,{size:"xl",weight:"bold",children:"Modern Jeepney Driver Management"}),e.jsx(U,{size:"sm",weight:"normal",children:"Manage modernized jeepney drivers in Bacolod City"})]})]}),e.jsx(Js,{onCreateDriver:g})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(M,{title:"Total Jeepney Drivers",icon:e.jsx(bs,{className:"h-4 w-4 text-muted-foreground"}),count:a.length,description:"+2 this week"}),e.jsx(M,{title:"Active on Routes",icon:e.jsx(O,{className:"h-4 w-4 text-green-500"}),count:a.filter(t=>t.status==="active").length,description:"Operating Routes"}),e.jsx(M,{title:"Pending Approval",icon:e.jsx(ds,{className:"h-4 w-4 text-yellow-500"}),count:a.filter(t=>t.status==="pending").length,description:"Awaiting verification"}),e.jsx(M,{title:"Issues",icon:e.jsx(y,{className:"h-4 w-4 text-red-400"}),count:a.filter(t=>t.status==="suspended").length,description:"Need Attention"})]}),e.jsx(Os,{searchQuery:l,setSearchQuery:n,selectedStatus:m,setSelectedStatus:o,onExport:c}),e.jsx(Is,{filteredDrivers:h,getStatusBadge:x,onUpdateDriver:u})]})]})}export{ya as default};
