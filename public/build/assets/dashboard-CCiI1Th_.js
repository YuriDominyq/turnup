import{j as e,r as o,a as N,H as K}from"./app-DPIbmkca.js";import{T as P}from"./text-CuO3q1Ce.js";import{c as X}from"./createLucideIcon-BUbHD3Kp.js";import{C as v,a as $,b as k,c as j}from"./card-CpMVErKM.js";import{c as q}from"./index-CkzFil69.js";import{P as _}from"./index-DNyFZSqz.js";import{c as p,B as x}from"./app-logo-icon-DtaRR2Vz.js";import{U as J}from"./users-DOtwpH9X.js";import{T as Q}from"./trending-up-DYLBg2oq.js";import{B as S}from"./badge-FHHxXKHy.js";import{R as b}from"./refresh-cw-B8pPg80f.js";import{F as C,a as W}from"./filter-DuVajABj.js";import{C as Y}from"./calendar-D0AkG9BA.js";import{D as Z}from"./download-CAjqHNYh.js";import{A as ee}from"./app-layout-C3Lhqjk6.js";/* empty css            */import"./chevron-right-BYW0j-n_.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],A=X("Activity",se);function ae(){return e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-primary rounded-xl",children:e.jsx(A,{className:"h-6 w-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx(P,{size:"xl",weight:"bold",children:"Terminal Operations Dashboard"}),e.jsx(P,{size:"sm",weight:"normal",children:"Real-time monitoring and analytics for terminal operations"})]})]})})})}var y="Progress",w=100,[te,$e]=q(y),[re,le]=te(y),E=o.forwardRef((s,t)=>{const{__scopeProgress:r,value:l=null,max:i,getValueLabel:m=ie,...d}=s;(i||i===0)&&!I(i)&&console.error(ne(`${i}`,"Progress"));const n=I(i)?i:w;l!==null&&!D(l,n)&&console.error(oe(`${l}`,"Progress"));const c=D(l,n)?l:null,f=h(c)?m(c,n):void 0;return e.jsx(re,{scope:r,value:c,max:n,children:e.jsx(_.div,{"aria-valuemax":n,"aria-valuemin":0,"aria-valuenow":h(c)?c:void 0,"aria-valuetext":f,role:"progressbar","data-state":z(c,n),"data-value":c??void 0,"data-max":n,...d,ref:t})})});E.displayName=y;var M="ProgressIndicator",U=o.forwardRef((s,t)=>{const{__scopeProgress:r,...l}=s,i=le(M,r);return e.jsx(_.div,{"data-state":z(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...l,ref:t})});U.displayName=M;function ie(s,t){return`${Math.round(s/t*100)}%`}function z(s,t){return s==null?"indeterminate":s===t?"complete":"loading"}function h(s){return typeof s=="number"}function I(s){return h(s)&&!isNaN(s)&&s>0}function D(s,t){return h(s)&&!isNaN(s)&&s<=t&&s>=0}function ne(s,t){return`Invalid prop \`max\` of value \`${s}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${w}\`.`}function oe(s,t){return`Invalid prop \`value\` of value \`${s}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${w} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var F=E,de=U;const H=o.forwardRef(({className:s,value:t,...r},l)=>e.jsx(F,{ref:l,className:p("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...r,children:e.jsx(de,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));H.displayName=F.displayName;const T=({title:s,value:t,icon:r,progress:l})=>e.jsxs(v,{className:"rounded-2xl shadow-sm",children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(k,{className:"text-sm font-medium",children:s}),e.jsx(r,{className:"h-4 w-4"})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.toLocaleString()}),l!==void 0&&e.jsx("div",{className:"mt-3",children:e.jsx(H,{value:l,className:"h-2"})})]})]});function ce(){const[s,t]=o.useState({totalUsers:0,totalRoutes:0});o.useEffect(()=>{N.get("/api/admin/kpi").then(d=>{t({totalUsers:d.data.totalCommuters,totalRoutes:d.data.totalRoutes})}).catch(d=>console.error(d))},[]);const r=2e3,l=50,i=Math.round(s.totalUsers/r*100),m=Math.round(s.totalRoutes/l*100);return e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(T,{title:"Total Users",value:s.totalUsers,icon:J,progress:i}),e.jsx(T,{title:"Total Routes",value:s.totalRoutes,icon:Q,progress:m})]})}const me=({logs:s,onClose:t})=>e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-background rounded-lg shadow-lg w-[90%] max-w-2xl max-h-[80%] overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Full System Logs"}),e.jsx("button",{className:"text-muted-foreground",onClick:t,children:"âœ•"})]}),e.jsx("div",{className:"space-y-2",children:s.map(r=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors",children:[e.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${r.type==="login"||r.type==="login"?"bg-green-500 animate-pulse":r.type==="logout"?"bg-yellow-500":r.type==="error"?"bg-red-500 animate-pulse":r.type==="create"?"bg-blue-500 animate-pulse":r.type==="update"?"bg-indigo-500":r.type==="delete"?"bg-rose-500":"bg-muted-foreground"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:r.title}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:r.description})]}),e.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:new Date(r.created_at).toLocaleString()})]},r.id))})]})});function ue(){const[s,t]=o.useState([]),[r,l]=o.useState(!0),[i,m]=o.useState(!1),d=async()=>{m(!0),l(!0);try{const n=await N.get("/api/reports");t(n.data.reports)}catch(n){console.error(n)}finally{l(!1),m(!1)}};return o.useEffect(()=>{d()},[]),r?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-primary/20 border-t-primary rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading reports..."})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between pb-2 border-b",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Reports"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[s.length," ",s.length===1?"report":"reports"," available"]})]}),e.jsxs("button",{onClick:d,disabled:i,className:"flex items-center gap-2 px-4 py-2 bg-primary hover:bg-primary/90 disabled:opacity-50 text-primary-foreground rounded-lg transition-colors shadow-sm font-medium",children:[e.jsx(b,{className:`w-4 h-4 ${i?"animate-spin":""}`}),"Refresh"]})]}),s.length===0?e.jsxs("div",{className:"text-center py-12 bg-muted/50 rounded-lg border-2 border-dashed",children:[e.jsx(C,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"font-medium",children:"No reports available"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Reports will appear here once generated"})]}):e.jsx("div",{className:"space-y-3",children:s.map(n=>e.jsxs("div",{className:"group flex items-center justify-between p-4 bg-card border rounded-lg hover:shadow-md hover:border-primary/50 transition-all duration-200",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg group-hover:bg-primary/20 transition-colors",children:e.jsx(C,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium truncate",children:n.filename}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-1 text-xs text-muted-foreground",children:[e.jsx(Y,{className:"w-3.5 h-3.5"}),new Date(n.created_at).toLocaleString("en-PH",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}),e.jsxs("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-primary hover:bg-primary/10 rounded-lg transition-colors ml-4",children:[e.jsx(Z,{className:"w-4 h-4"}),"Download"]})]},n.id))})]})}function xe(){const[s,t]=o.useState("overview"),[r,l]=o.useState(!1),[i,m]=o.useState([]),[d,n]=o.useState(!1),[c,f]=o.useState(null),[O,R]=o.useState(!1),[V,B]=o.useState(!0),L=[{id:"overview",label:"Overview"},{id:"reports",label:"Reports"}],g=async()=>{try{const u=(await N.get("https://turnup-admin.com/api/system-logs")).data.systemLogs;u.length>0&&u[0].id!==c&&(n(!0),f(u[0].id),setTimeout(()=>n(!1),2e3)),m(u)}catch(a){console.error("Error fetching logs:",a)}finally{B(!1),l(!1)}},G=async()=>{l(!0),await g()};return o.useEffect(()=>{const a=setInterval(()=>{g()},5e3);return g(),()=>clearInterval(a)}),V?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(b,{className:"h-8 w-8 animate-spin mx-auto text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading dashboard"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(v,{children:e.jsx(j,{className:"p-4",children:e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("div",{role:"tablist","aria-label":"Super Admin Sections",className:"hidden sm:flex items-center gap-1 bg-muted p-1 rounded-lg",children:L.map(a=>e.jsx(x,{role:"tab","aria-selected":s===a.id,"aria-controls":`${a.id}-panel`,onClick:()=>t(a.id),size:"sm",variant:s===a.id?"default":"ghost",className:p("transition-all",s===a.id&&"bg-primary text-primary-foreground shadow-sm"),children:a.label},a.id))}),e.jsx("select",{className:"sm:hidden flex-1 rounded-md border border-input bg-background px-3 py-2 text-sm",value:s,onChange:a=>t(a.target.value),"aria-label":"Select analytics section",children:L.map(a=>e.jsx("option",{value:a.id,children:a.label},a.id))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"hidden sm:inline-flex bg-green-500 text-white",children:"Live Updates"}),e.jsx(x,{variant:"ghost",size:"sm",onClick:G,disabled:r,"aria-label":"Refresh data",children:e.jsx(b,{className:p("h-4 w-4",r&&"animate-spin")})}),e.jsxs(x,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"Filters"})]})]})]})})})}),e.jsxs("div",{role:"tabpanel",id:`${s}-panel`,"aria-labelledby":`${s}-tab`,children:[s==="overview"&&e.jsx("div",{className:"space-y-6",children:e.jsxs(v,{children:[e.jsx($,{className:"pb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-lg font-bold",children:"System Logs"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Recent system events and activity logs"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(S,{variant:"outline",className:"gap-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${d?"bg-green-500 animate-pulse":"bg-green-500"}`}),"Real-time"]}),e.jsxs(x,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>R(!0),children:["View Full Logs",e.jsx(A,{className:"h-4 w-4"})]})]})]})}),e.jsx(j,{className:"pt-4",children:e.jsx("div",{className:"space-y-3",children:i.slice(0,5).map(a=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors",children:[e.jsx("div",{className:p("w-2 h-2 rounded-full flex-shrink-0",a.type==="login"?"bg-green-500 animate-pulse":a.type==="logout"?"bg-yellow-500":a.type==="error"?"bg-red-500 animate-pulse":a.type==="create"?"bg-blue-500 animate-pulse":a.type==="update"?"bg-indigo-500":a.type==="delete"?"bg-rose-500":"bg-muted-foreground")}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:a.title}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:a.description})]}),e.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:new Date(a.created_at).toLocaleString()})]},a.id))})})]})}),s==="reports"&&e.jsx(ue,{}),O&&e.jsx(me,{logs:i,onClose:()=>R(!1)})]})]})}const pe=[{title:"Dashboard",href:"/admin/dashboard"}];function ke(){return e.jsxs(ee,{breadcrumbs:pe,children:[e.jsx(K,{title:"Dashboard"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-8 rounded-xl p-4 lg:p-8 overflow-x-auto min-h-screen",children:[e.jsx(ae,{}),e.jsx(ce,{}),e.jsx(xe,{}),e.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-blue-600/5 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-600/5 rounded-full blur-3xl animate-pulse delay-1000"}),"j"]})]})]})}export{ke as default};
