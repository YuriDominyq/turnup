import{u as K,j as e,r as y,H as X}from"./app-D81AfNAL.js";import{B as C}from"./app-logo-icon-BjubQMuQ.js";import{D as Z,a as J,b as Q,c as W,d as Y}from"./dialog-Cad8Ah_b.js";import{I as $}from"./input-CztKM8-a.js";import{S as ee,a as se,b as ae,c as te,d as re}from"./select-4TwF73TW.js";import{T as ne,a as ie,b as R}from"./tabs-CGnLLnEW.js";import{T as A,D as H,a as q,b as B,c as p,A as ce,y as M}from"./app-layout-Bnx7di7E.js";import{c as b}from"./createLucideIcon-Bknem4C5.js";import{P as V}from"./plus-BseDgrfU.js";import{C as x,a as v,b as w,B as E,c as h}from"./card-BgpPhrCW.js";import{S as F}from"./square-pen-D41kWubr.js";import{E as I,T as G}from"./trash-2-D3Qrqew6.js";import{M as L}from"./map-pin-DWWnlP9Q.js";import{T as le,a as de,b as z,c as g,d as oe,e as N}from"./table-PhFx-RS1.js";import{S as me}from"./search-B1uwqiBU.js";/* empty css            */import"./index-DiRrSXnD.js";import"./index-DbGJuZvl.js";import"./index-CPwWrBJi.js";import"./users-CuWO30xN.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],j=b("Building2",xe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ue=b("Calendar",he);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],P=b("Ellipsis",pe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],fe=b("Grid3x3",je);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],ge=b("List",ye);function Ne({routes:a,company:t,isOpen:r,onClose:i,onAdd:n,onEdit:o}){const{data:s,setData:c,post:T,put:_,processing:f,reset:S,errors:m}=K({company_name:"",route_id:""}),D=l=>{l.preventDefault();const k={...s,route_id:Number(s.route_id)};t?_(`/admin/company/${t.company_id}`,{onSuccess:()=>{o({...k,company_id:t.company_id}),S(),i()},preserveScroll:!0}):T("/admin/company",{onSuccess:()=>{n({...k}),S(),i()}})};return e.jsx(Z,{open:r,onOpenChange:i,children:e.jsxs(J,{children:[e.jsx(Q,{children:e.jsx(W,{children:t?"Edit Company":"Create Company"})}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Company Name"}),e.jsx($,{placeholder:"Enter company name",value:s.company_name,onChange:l=>c("company_name",l.target.value),required:!0}),m.company_name&&e.jsx("p",{className:"text-sm text-red-500",children:m.company_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Select Route"}),e.jsxs(ee,{onValueChange:l=>c("route_id",l),value:s.route_id,children:[e.jsx(se,{children:e.jsx(ae,{placeholder:"Choose a route"})}),e.jsx(te,{children:a.map(l=>e.jsxs(re,{value:String(l.id),children:[l.first_terminal," → ",l.second_terminal]},l.id))})]}),m.route_id&&e.jsx("p",{className:"text-sm text-red-500",children:m.route_id})]}),e.jsx(Y,{children:e.jsx(C,{type:"submit",disabled:f,children:f?"Saving...":"Save"})})]})]})})}function ve({viewMode:a,setViewMode:t,onAdd:r}){return e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-primary rounded-xl",children:e.jsx(j,{className:"w-6 h-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx(A,{size:"xl",weight:"bold",children:"Company Management"}),e.jsx(A,{size:"sm",weight:"normal",children:"Manage transport companies and their route assignments"})]})]}),e.jsxs("div",{className:"mt-4 sm:mt-0 flex items-center space-x-3",children:[e.jsx(ne,{value:a,onValueChange:t,className:"w-auto",children:e.jsxs(ie,{children:[e.jsxs(R,{value:"grid",className:"flex items-center space-x-2",children:[e.jsx(fe,{className:"w-4 h-4"}),e.jsx("span",{children:"Grid"})]}),e.jsxs(R,{value:"table",className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"w-4 h-4"}),e.jsx("span",{children:"Table"})]})]})}),e.jsxs(C,{onClick:r,children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Add Company"]})]})]})}function we({company:a,routes:t,onEdit:r,onDelete:i}){const n=t.find(s=>s.id===a.route_id),o=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-";return e.jsxs(x,{className:"hover:shadow-md transition-shadow",children:[e.jsx(v,{className:"pb-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(j,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx(w,{className:"text-lg font-semibold",children:a.company_name}),e.jsx(E,{variant:"secondary",className:"text-xs font-mono",children:a.company_id})]})]}),e.jsxs(H,{children:[e.jsx(q,{asChild:!0,children:e.jsx(C,{variant:"ghost",size:"icon",children:e.jsx(P,{className:"w-4 h-4"})})}),e.jsxs(B,{align:"end",children:[e.jsx(p,{onClick:()=>{r(a)},children:e.jsx(F,{className:"w-4 h-4 mr-2"})}),e.jsx(p,{children:e.jsx(I,{className:"w-4 h-4 mr-2"})}),e.jsxs(p,{className:"text-destructive",onClick:()=>i(a.company_id),children:[e.jsx(G,{className:"w-4 h-4 mr-2"})," Delete"]})]})]})]})}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(L,{className:"w-4 h-4 mr-3 text-primary"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:"Assigned Route"}),e.jsx("div",{children:n?`${n.first_terminal} → ${n.second_terminal}`:"No route assigned"})]})]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(ue,{className:"w-4 h-4 mr-3 text-green-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:"Created"}),e.jsx("div",{children:o(a.created_at)})]})]})]}),n&&e.jsxs(E,{variant:"outline",className:"w-fit",children:["Route #",n.id]})]})]})}function Ce({companies:a,routes:t,onEdit:r,onDelete:i}){const n=s=>t.find(c=>c.id===s),o=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-";return e.jsxs(le,{children:[e.jsx(de,{children:e.jsxs(z,{children:[e.jsx(g,{children:"Company"}),e.jsx(g,{children:"Route"}),e.jsx(g,{children:"Created"}),e.jsx(g,{children:"Updated"}),e.jsx(g,{className:"text-right",children:"Actions"})]})}),e.jsx(oe,{children:a.map(s=>{const c=n(s.route_id);return e.jsxs(z,{children:[e.jsx(N,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(j,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.company_name}),e.jsx(E,{variant:"secondary",className:"text-xs font-mono",children:s.company_id})]})]})}),e.jsx(N,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:c?`${c.first_terminal} → ${c.second_terminal}`:"No route"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Route #",s.route_id]})]})}),e.jsx(N,{className:"text-sm text-muted-foreground",children:o(s.created_at)}),e.jsx(N,{className:"text-sm text-muted-foreground",children:o(s.updated_at)}),e.jsx(N,{className:"text-right",children:e.jsxs(H,{children:[e.jsx(q,{asChild:!0,children:e.jsx(C,{variant:"ghost",size:"icon",children:e.jsx(P,{className:"w-4 h-4"})})}),e.jsxs(B,{align:"end",children:[e.jsxs(p,{onClick:()=>r(s),children:[e.jsx(F,{className:"w-4 h-4 mr-2"})," Edit"]}),e.jsxs(p,{children:[e.jsx(I,{className:"w-4 h-4 mr-2"})," View"]}),e.jsxs(p,{className:"text-destructive",onClick:()=>i(s.company_id),children:[e.jsx(G,{className:"w-4 h-4 mr-2"})," Delete"]})]})]})})]},s.company_id)})})]})}function be({companies:a,routes:t,viewMode:r,searchTerm:i,onEdit:n,onDelete:o,onAdd:s}){return a.length===0?e.jsx(x,{children:e.jsxs(h,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(j,{className:"w-16 h-16 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No companies found"}),e.jsx("p",{className:"text-muted-foreground mb-6 text-center",children:i?"Try adjusting your search criteria":"Get started by adding your first company"}),e.jsxs(C,{onClick:s,children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Add Company"]})]})}):r==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:a.map(c=>e.jsx(we,{company:c,routes:t,onEdit:n,onDelete:o},c.company_id))}):e.jsx(Ce,{companies:a,routes:t,onEdit:n,onDelete:o})}function _e({searchTerm:a,setSearchTerm:t,filteredLength:r,totalLength:i}){return e.jsx(x,{className:"mb-6",children:e.jsx(h,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx($,{placeholder:"Search companies or company IDs...",value:a,onChange:n=>t(n.target.value),className:"pl-10 w-full sm:w-80"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",r," of ",i," companies"]})]})})})}function Se({companiesLength:a,assignedRoutes:t,availableRoutes:r,unassignedRoutes:i}){return e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs(x,{children:[e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(w,{className:"text-sm font-medium",children:"Total Companies"}),e.jsx(j,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(h,{children:e.jsx("div",{className:"text-2xl font-bold",children:a})})]}),e.jsxs(x,{children:[e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(w,{className:"text-sm font-medium",children:"Assigned Routes"}),e.jsx(L,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(h,{children:e.jsx("div",{className:"text-2xl font-bold",children:t})})]}),e.jsxs(x,{children:[e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(w,{className:"text-sm font-medium",children:"Available Routes"}),e.jsx(L,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(h,{children:e.jsx("div",{className:"text-2xl font-bold",children:r})})]}),e.jsxs(x,{children:[e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(w,{className:"text-sm font-medium",children:"Unassigned Routes"}),e.jsx(j,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(h,{children:e.jsx("div",{className:"text-2xl font-bold",children:i})})]})]})}const ke=[{title:"Company",href:"/company"}];function Ze({routes:a,companies:t}){const[r,i]=y.useState(t),[n,o]=y.useState(""),[s,c]=y.useState(!1),[T,_]=y.useState(null),[f,S]=y.useState("grid"),m=r.filter(d=>d.company_name.toLowerCase().includes(n.toLowerCase())||d.company_id.toLowerCase().includes(n.toLowerCase())),D=d=>{i(u=>[d,...u]),M.success("Add Company Successfully")},l=d=>{_(d),c(!0),M.success("Edit Company Successfully")},k=async d=>{try{const u=document.querySelector('meta[name="csrf-token"]').content;if(!(await fetch(`/admin/company/${d}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":u}})).ok)throw new Error("Failed to delete company");i(U=>U.filter(O=>O.company_id!==d)),M.success("Delete Company Successfully")}catch(u){console.error(u),M.error("Error Delete Company")}};return e.jsxs(ce,{breadcrumbs:ke,children:[e.jsx(X,{title:"Company"}),e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-8 rounded-xl p-4 lg:p-8 overflow-x-auto min-h-screen",children:[e.jsx(ve,{viewMode:f,setViewMode:S,onAdd:()=>c(!0)}),e.jsx(Se,{companiesLength:r.length,assignedRoutes:new Set(r.map(d=>d.route_id)).size,availableRoutes:a.length,unassignedRoutes:a.length-new Set(r.map(d=>d.route_id)).size}),e.jsx(_e,{searchTerm:n,setSearchTerm:o,filteredLength:m.length,totalLength:r.length}),e.jsx(be,{companies:m,routes:a,viewMode:f,searchTerm:n,onEdit:l,onDelete:k,onAdd:()=>{_(null),c(!0)}}),e.jsx(Ne,{routes:a,isOpen:s,onClose:()=>c(!1),company:T,onAdd:D,onEdit:l})]})})]})}export{Ze as default};
