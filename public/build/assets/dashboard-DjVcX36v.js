import{j as e,r,a as j,H as M}from"./app-DzgmRbGj.js";import{A as R,T as N,a as F}from"./app-layout-2xlBgMWn.js";import{C as h,a as S,b as k,c as g,B as y}from"./badge-DG19z79L.js";import{P as _,T as A}from"./progress-BoO0iO3Z.js";import{U as E}from"./users-J87TqALS.js";import{B as x,c as p}from"./app-logo-icon-sdF4cBx7.js";import{R as f}from"./refresh-cw-CvHOEGjb.js";import{F as w,a as H}from"./filter-QwCSr17s.js";import{c as $}from"./createLucideIcon-KiHQ44m7.js";import{D as P}from"./download-DFGR7vgG.js";/* empty css            */import"./index-D_bpKC_Y.js";import"./index-DCwCQVhO.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],O=$("Calendar",B);function K(){return e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-primary rounded-xl",children:e.jsx(R,{className:"h-6 w-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx(N,{size:"xl",weight:"bold",children:"Terminal Operations Dashboard"}),e.jsx(N,{size:"sm",weight:"normal",children:"Real-time monitoring and analytics for terminal operations"})]})]})})})}const L=({title:t,value:i,icon:a,progress:n})=>e.jsxs(h,{className:"rounded-2xl shadow-sm",children:[e.jsxs(S,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(k,{className:"text-sm font-medium",children:t}),e.jsx(a,{className:"h-4 w-4"})]}),e.jsxs(g,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.toLocaleString()}),n!==void 0&&e.jsx("div",{className:"mt-3",children:e.jsx(_,{value:n,className:"h-2"})})]})]});function G(){const[t,i]=r.useState({totalUsers:0,totalRoutes:0});r.useEffect(()=>{j.get("/api/admin/kpi").then(d=>{i({totalUsers:d.data.totalCommuters,totalRoutes:d.data.totalRoutes})}).catch(d=>console.error(d))},[]);const a=2e3,n=50,o=Math.round(t.totalUsers/a*100),c=Math.round(t.totalRoutes/n*100);return e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(L,{title:"Total Users",value:t.totalUsers,icon:E,progress:o}),e.jsx(L,{title:"Total Routes",value:t.totalRoutes,icon:A,progress:c})]})}const V=({logs:t,onClose:i})=>e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-background rounded-lg shadow-lg w-[90%] max-w-2xl max-h-[80%] overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Full System Logs"}),e.jsx("button",{className:"text-muted-foreground",onClick:i,children:"âœ•"})]}),e.jsx("div",{className:"space-y-2",children:t.map(a=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors",children:[e.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${a.type==="login"||a.type==="login"?"bg-green-500 animate-pulse":a.type==="logout"?"bg-yellow-500":a.type==="error"?"bg-red-500 animate-pulse":a.type==="create"?"bg-blue-500 animate-pulse":a.type==="update"?"bg-indigo-500":a.type==="delete"?"bg-rose-500":"bg-muted-foreground"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:a.title}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:a.description})]}),e.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:new Date(a.created_at).toLocaleString()})]},a.id))})]})});function q(){const[t,i]=r.useState([]),[a,n]=r.useState(!0),[o,c]=r.useState(!1),d=async()=>{c(!0),n(!0);try{const l=await j.get("/api/reports");i(l.data.reports)}catch(l){console.error(l)}finally{n(!1),c(!1)}};return r.useEffect(()=>{d()},[]),a?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-primary/20 border-t-primary rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading reports..."})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between pb-2 border-b",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Reports"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[t.length," ",t.length===1?"report":"reports"," available"]})]}),e.jsxs("button",{onClick:d,disabled:o,className:"flex items-center gap-2 px-4 py-2 bg-primary hover:bg-primary/90 disabled:opacity-50 text-primary-foreground rounded-lg transition-colors shadow-sm font-medium",children:[e.jsx(f,{className:`w-4 h-4 ${o?"animate-spin":""}`}),"Refresh"]})]}),t.length===0?e.jsxs("div",{className:"text-center py-12 bg-muted/50 rounded-lg border-2 border-dashed",children:[e.jsx(w,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"font-medium",children:"No reports available"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Reports will appear here once generated"})]}):e.jsx("div",{className:"space-y-3",children:t.map(l=>e.jsxs("div",{className:"group flex items-center justify-between p-4 bg-card border rounded-lg hover:shadow-md hover:border-primary/50 transition-all duration-200",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg group-hover:bg-primary/20 transition-colors",children:e.jsx(w,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium truncate",children:l.filename}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-1 text-xs text-muted-foreground",children:[e.jsx(O,{className:"w-3.5 h-3.5"}),new Date(l.created_at).toLocaleString("en-PH",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}),e.jsxs("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-primary hover:bg-primary/10 rounded-lg transition-colors ml-4",children:[e.jsx(P,{className:"w-4 h-4"}),"Download"]})]},l.id))})]})}function J(){const[t,i]=r.useState("overview"),[a,n]=r.useState(!1),[o,c]=r.useState([]),[d,l]=r.useState(!1),[C,D]=r.useState(null),[T,b]=r.useState(!1),[I,U]=r.useState(!0),v=[{id:"overview",label:"Overview"},{id:"reports",label:"Reports"}],u=async()=>{try{const m=(await j.get("https://turnup-admin.com/api/system-logs")).data.systemLogs;m.length>0&&m[0].id!==C&&(l(!0),D(m[0].id),setTimeout(()=>l(!1),2e3)),c(m)}catch(s){console.error("Error fetching logs:",s)}finally{U(!1),n(!1)}},z=async()=>{n(!0),await u()};return r.useEffect(()=>{const s=setInterval(()=>{u()},5e3);return u(),()=>clearInterval(s)}),I?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(f,{className:"h-8 w-8 animate-spin mx-auto text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading dashboard"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(h,{children:e.jsx(g,{className:"p-4",children:e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("div",{role:"tablist","aria-label":"Super Admin Sections",className:"hidden sm:flex items-center gap-1 bg-muted p-1 rounded-lg",children:v.map(s=>e.jsx(x,{role:"tab","aria-selected":t===s.id,"aria-controls":`${s.id}-panel`,onClick:()=>i(s.id),size:"sm",variant:t===s.id?"default":"ghost",className:p("transition-all",t===s.id&&"bg-primary text-primary-foreground shadow-sm"),children:s.label},s.id))}),e.jsx("select",{className:"sm:hidden flex-1 rounded-md border border-input bg-background px-3 py-2 text-sm",value:t,onChange:s=>i(s.target.value),"aria-label":"Select analytics section",children:v.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"hidden sm:inline-flex bg-green-500 text-white",children:"Live Updates"}),e.jsx(x,{variant:"ghost",size:"sm",onClick:z,disabled:a,"aria-label":"Refresh data",children:e.jsx(f,{className:p("h-4 w-4",a&&"animate-spin")})}),e.jsxs(x,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"Filters"})]})]})]})})})}),e.jsxs("div",{role:"tabpanel",id:`${t}-panel`,"aria-labelledby":`${t}-tab`,children:[t==="overview"&&e.jsx("div",{className:"space-y-6",children:e.jsxs(h,{children:[e.jsx(S,{className:"pb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(k,{className:"text-lg font-bold",children:"System Logs"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Recent system events and activity logs"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(y,{variant:"outline",className:"gap-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${d?"bg-green-500 animate-pulse":"bg-green-500"}`}),"Real-time"]}),e.jsxs(x,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>b(!0),children:["View Full Logs",e.jsx(R,{className:"h-4 w-4"})]})]})]})}),e.jsx(g,{className:"pt-4",children:e.jsx("div",{className:"space-y-3",children:o.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors",children:[e.jsx("div",{className:p("w-2 h-2 rounded-full flex-shrink-0",s.type==="login"?"bg-green-500 animate-pulse":s.type==="logout"?"bg-yellow-500":s.type==="error"?"bg-red-500 animate-pulse":s.type==="create"?"bg-blue-500 animate-pulse":s.type==="update"?"bg-indigo-500":s.type==="delete"?"bg-rose-500":"bg-muted-foreground")}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s.description})]}),e.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:new Date(s.created_at).toLocaleString()})]},s.id))})})]})}),t==="reports"&&e.jsx(q,{}),T&&e.jsx(V,{logs:o,onClose:()=>b(!1)})]})]})}const Q=[{title:"Dashboard",href:"/admin/dashboard"}];function oe(){return e.jsxs(F,{breadcrumbs:Q,children:[e.jsx(M,{title:"Dashboard"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-8 rounded-xl p-4 lg:p-8 overflow-x-auto min-h-screen",children:[e.jsx(K,{}),e.jsx(G,{}),e.jsx(J,{}),e.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-blue-600/5 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-600/5 rounded-full blur-3xl animate-pulse delay-1000"}),"j"]})]})]})}export{oe as default};
