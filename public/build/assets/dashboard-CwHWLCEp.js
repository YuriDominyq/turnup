import{j as e,r,a as g,H as z}from"./app-BwJe33jI.js";import{A as L,T as v,a as A}from"./app-layout-Z5-JZmBD.js";import{C as p,a as R,b as S,c as h,B as N}from"./badge-B-oAc1in.js";import{P as E,T as F}from"./progress-BEoPP6E9.js";import{U as H}from"./users-B4VdBox2.js";import{B as m,c as u}from"./app-logo-icon-DLN0-5VZ.js";import{R as y}from"./refresh-cw-zQk4653R.js";import{F as M}from"./filter-aCMesw2m.js";/* empty css            */import"./index-DJ6Cwf9y.js";import"./index-Ds6ukjZj.js";import"./createLucideIcon-ohn3dKDM.js";function $(){return e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-primary rounded-xl",children:e.jsx(L,{className:"h-6 w-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx(v,{size:"xl",weight:"bold",children:"Terminal Operations Dashboard"}),e.jsx(v,{size:"sm",weight:"normal",children:"Real-time monitoring and analytics for terminal operations"})]})]})})})}const w=({title:a,value:i,icon:t,progress:n})=>e.jsxs(p,{className:"rounded-2xl shadow-sm",children:[e.jsxs(R,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(S,{className:"text-sm font-medium",children:a}),e.jsx(t,{className:"h-4 w-4"})]}),e.jsxs(h,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.toLocaleString()}),n!==void 0&&e.jsx("div",{className:"mt-3",children:e.jsx(E,{value:n,className:"h-2"})})]})]});function B(){const[a,i]=r.useState({totalUsers:0,totalRoutes:0});r.useEffect(()=>{g.get("/api/admin/kpi").then(o=>{i({totalUsers:o.data.totalCommuters,totalRoutes:o.data.totalRoutes})}).catch(o=>console.error(o))},[]);const t=2e3,n=50,d=Math.round(a.totalUsers/t*100),l=Math.round(a.totalRoutes/n*100);return e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(w,{title:"Total Users",value:a.totalUsers,icon:H,progress:d}),e.jsx(w,{title:"Total Routes",value:a.totalRoutes,icon:F,progress:l})]})}const O=({logs:a,onClose:i})=>e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-background rounded-lg shadow-lg w-[90%] max-w-2xl max-h-[80%] overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Full System Logs"}),e.jsx("button",{className:"text-muted-foreground",onClick:i,children:"âœ•"})]}),e.jsx("div",{className:"space-y-2",children:a.map(t=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors",children:[e.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${t.type==="login"||t.type==="login"?"bg-green-500 animate-pulse":t.type==="logout"?"bg-yellow-500":t.type==="error"?"bg-red-500 animate-pulse":t.type==="create"?"bg-blue-500 animate-pulse":t.type==="update"?"bg-indigo-500":t.type==="delete"?"bg-rose-500":"bg-muted-foreground"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:t.title}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t.description})]}),e.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:new Date(t.created_at).toLocaleString()})]},t.id))})]})});function P(){const[a,i]=r.useState([]),[t,n]=r.useState(!0),d=async()=>{n(!0);try{const l=await g.get("/api/reports");i(l.data.reports)}catch(l){console.error(l)}finally{n(!1)}};return r.useEffect(()=>{d()},[]),t?e.jsx("p",{children:"Loading reports..."}):e.jsx("div",{className:"space-y-3",children:a.map(l=>e.jsxs("div",{className:"flex justify-between p-3 bg-muted rounded-lg",children:[e.jsx("span",{children:l.filename}),e.jsx("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"Download"})]},l.id))})}function _(){const[a,i]=r.useState("overview"),[t,n]=r.useState(!1),[d,l]=r.useState([]),[o,f]=r.useState(!1),[C,T]=r.useState(null),[k,j]=r.useState(!1),[D,U]=r.useState(!0),b=[{id:"overview",label:"Overview"},{id:"reports",label:"Reports"}],x=async()=>{try{const c=(await g.get("https://turnup-admin.com/api/system-logs")).data.systemLogs;c.length>0&&c[0].id!==C&&(f(!0),T(c[0].id),setTimeout(()=>f(!1),2e3)),l(c)}catch(s){console.error("Error fetching logs:",s)}finally{U(!1),n(!1)}},I=async()=>{n(!0),await x()};return r.useEffect(()=>{const s=setInterval(()=>{x()},5e3);return x(),()=>clearInterval(s)}),D?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(y,{className:"h-8 w-8 animate-spin mx-auto text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading dashboard"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(p,{children:e.jsx(h,{className:"p-4",children:e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("div",{role:"tablist","aria-label":"Super Admin Sections",className:"hidden sm:flex items-center gap-1 bg-muted p-1 rounded-lg",children:b.map(s=>e.jsx(m,{role:"tab","aria-selected":a===s.id,"aria-controls":`${s.id}-panel`,onClick:()=>i(s.id),size:"sm",variant:a===s.id?"default":"ghost",className:u("transition-all",a===s.id&&"bg-primary text-primary-foreground shadow-sm"),children:s.label},s.id))}),e.jsx("select",{className:"sm:hidden flex-1 rounded-md border border-input bg-background px-3 py-2 text-sm",value:a,onChange:s=>i(s.target.value),"aria-label":"Select analytics section",children:b.map(s=>e.jsx("option",{value:s.id,children:s.label},s.id))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"hidden sm:inline-flex bg-green-500 text-white",children:"Live Updates"}),e.jsx(m,{variant:"ghost",size:"sm",onClick:I,disabled:t,"aria-label":"Refresh data",children:e.jsx(y,{className:u("h-4 w-4",t&&"animate-spin")})}),e.jsxs(m,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(M,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden md:inline",children:"Filters"})]})]})]})})})}),e.jsxs("div",{role:"tabpanel",id:`${a}-panel`,"aria-labelledby":`${a}-tab`,children:[a==="overview"&&e.jsx("div",{className:"space-y-6",children:e.jsxs(p,{children:[e.jsx(R,{className:"pb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-lg font-bold",children:"System Logs"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Recent system events and activity logs"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(N,{variant:"outline",className:"gap-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${o?"bg-green-500 animate-pulse":"bg-green-500"}`}),"Real-time"]}),e.jsxs(m,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>j(!0),children:["View Full Logs",e.jsx(L,{className:"h-4 w-4"})]})]})]})}),e.jsx(h,{className:"pt-4",children:e.jsx("div",{className:"space-y-3",children:d.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted rounded-lg hover:bg-muted/80 transition-colors",children:[e.jsx("div",{className:u("w-2 h-2 rounded-full flex-shrink-0",s.type==="login"?"bg-green-500 animate-pulse":s.type==="logout"?"bg-yellow-500":s.type==="error"?"bg-red-500 animate-pulse":s.type==="create"?"bg-blue-500 animate-pulse":s.type==="update"?"bg-indigo-500":s.type==="delete"?"bg-rose-500":"bg-muted-foreground")}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s.description})]}),e.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:new Date(s.created_at).toLocaleString()})]},s.id))})})]})}),a==="reports"&&e.jsx(P,{}),k&&e.jsx(O,{logs:d,onClose:()=>j(!1)})]})]})}const K=[{title:"Dashboard",href:"/admin/dashboard"}];function ae(){return e.jsxs(A,{breadcrumbs:K,children:[e.jsx(z,{title:"Dashboard"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-8 rounded-xl p-4 lg:p-8 overflow-x-auto min-h-screen",children:[e.jsx($,{}),e.jsx(B,{}),e.jsx(_,{}),e.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-blue-600/5 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-600/5 rounded-full blur-3xl animate-pulse delay-1000"}),"j"]})]})]})}export{ae as default};
