import{r as u,j as e,a as R,c as T,H as Ce}from"./app-BC6TTv-b.js";import{e as B,R as _e,f as Se,P as Pe,W as Re,C as Ee,g as ke,D as Te,h as I,O as Le,b as Fe,d as Me,c as Oe,y as E,a as $e,T as O}from"./app-layout-gdS253ML.js";import{B as Be}from"./badge-CcgQlWdv.js";import{C as z,a as U,b as H,d as Ie,c as q}from"./card-BMj8xi_s.js";import{u as V,b as ze,c as w,d as G,B as j}from"./app-logo-icon-ADEa7iGf.js";import{c as Ue,a as He}from"./index-DtSCugJ6.js";import{U as J}from"./users-CEfjUyv7.js";import{M as qe}from"./mail-jg1YsbCn.js";import{P as Ve}from"./phone-T1y9zuQH.js";import{M as Ge}from"./map-pin-C4kNZsDH.js";import{E as Je}from"./eye-DVCPa6Qm.js";import{c as k}from"./createLucideIcon-_pJoLD2m.js";import{T as We}from"./trash-2-DW7wGnzs.js";import{I as A}from"./input-DaO6U1Zi.js";import{S as W,a as Q,b as X,c as Y,d as _}from"./select-V_0JP5H7.js";import{S as Qe}from"./search-CCGcCDPV.js";import{F as Xe}from"./filter-fuxjmTKO.js";import{D as Ye}from"./download-CK6eVAs4.js";import{D as Ke,e as Ze,a as es,b as ss,c as ts,f as as}from"./dialog-C9JFacqI.js";import{L as D}from"./label-oCVJ_4ll.js";import{U as rs}from"./user-B-JWgHHb.js";import{C as N}from"./circle-alert-1jqHjzey.js";import{C as os}from"./car-D2CU-l-H.js";import{P as ns}from"./plus-DnRAsqx4.js";import{u as M,w as is}from"./xlsx-D3O65r46.js";import{C as ls}from"./clock-CkxhaPiw.js";/* empty css            */import"./index-CaktliW0.js";import"./index-BdQq_4o_.js";import"./index-C1WR0Oiz.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ds=k("ArrowLeft",cs);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ps=k("ArrowRight",ms);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],K=k("CircleCheckBig",us);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],xs=k("SquarePen",hs);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],gs=k("UserCheck",fs);var Z="AlertDialog",[js,wt]=Ue(Z,[B]),v=B(),ee=t=>{const{__scopeAlertDialog:n,...s}=t,i=v(n);return e.jsx(_e,{...i,...s,modal:!0})};ee.displayName=Z;var vs="AlertDialogTrigger",se=u.forwardRef((t,n)=>{const{__scopeAlertDialog:s,...i}=t,c=v(s);return e.jsx(Se,{...c,...i,ref:n})});se.displayName=vs;var Ns="AlertDialogPortal",te=t=>{const{__scopeAlertDialog:n,...s}=t,i=v(n);return e.jsx(Pe,{...i,...s})};te.displayName=Ns;var ws="AlertDialogOverlay",ae=u.forwardRef((t,n)=>{const{__scopeAlertDialog:s,...i}=t,c=v(s);return e.jsx(Le,{...c,...i,ref:n})});ae.displayName=ws;var S="AlertDialogContent",[ys,bs]=js(S),As=ze("AlertDialogContent"),re=u.forwardRef((t,n)=>{const{__scopeAlertDialog:s,children:i,...c}=t,p=v(s),l=u.useRef(null),h=V(n,l),x=u.useRef(null);return e.jsx(Re,{contentName:S,titleName:oe,docsSlug:"alert-dialog",children:e.jsx(ys,{scope:s,cancelRef:x,children:e.jsxs(Ee,{role:"alertdialog",...p,...c,ref:h,onOpenAutoFocus:He(c.onOpenAutoFocus,r=>{r.preventDefault(),x.current?.focus({preventScroll:!0})}),onPointerDownOutside:r=>r.preventDefault(),onInteractOutside:r=>r.preventDefault(),children:[e.jsx(As,{children:i}),e.jsx(Cs,{contentRef:l})]})})})});re.displayName=S;var oe="AlertDialogTitle",ne=u.forwardRef((t,n)=>{const{__scopeAlertDialog:s,...i}=t,c=v(s);return e.jsx(ke,{...c,...i,ref:n})});ne.displayName=oe;var ie="AlertDialogDescription",le=u.forwardRef((t,n)=>{const{__scopeAlertDialog:s,...i}=t,c=v(s);return e.jsx(Te,{...c,...i,ref:n})});le.displayName=ie;var Ds="AlertDialogAction",ce=u.forwardRef((t,n)=>{const{__scopeAlertDialog:s,...i}=t,c=v(s);return e.jsx(I,{...c,...i,ref:n})});ce.displayName=Ds;var de="AlertDialogCancel",me=u.forwardRef((t,n)=>{const{__scopeAlertDialog:s,...i}=t,{cancelRef:c}=bs(de,s),p=v(s),l=V(n,c);return e.jsx(I,{...p,...i,ref:l})});me.displayName=de;var Cs=({contentRef:t})=>{const n=`\`${S}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${S}\` by passing a \`${ie}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${S}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return u.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(n)},[n,t]),null},_s=ee,Ss=se,Ps=te,pe=ae,ue=re,he=ce,xe=me,fe=ne,ge=le;const Rs=_s,Es=Ss,ks=Ps,je=u.forwardRef(({className:t,...n},s)=>e.jsx(pe,{className:w("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n,ref:s}));je.displayName=pe.displayName;const ve=u.forwardRef(({className:t,...n},s)=>e.jsxs(ks,{children:[e.jsx(je,{}),e.jsx(ue,{ref:s,className:w("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n})]}));ve.displayName=ue.displayName;const Ne=({className:t,...n})=>e.jsx("div",{className:w("flex flex-col space-y-2 text-center sm:text-left",t),...n});Ne.displayName="AlertDialogHeader";const we=({className:t,...n})=>e.jsx("div",{className:w("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n});we.displayName="AlertDialogFooter";const ye=u.forwardRef(({className:t,...n},s)=>e.jsx(fe,{ref:s,className:w("text-lg font-semibold",t),...n}));ye.displayName=fe.displayName;const be=u.forwardRef(({className:t,...n},s)=>e.jsx(ge,{ref:s,className:w("text-sm text-muted-foreground",t),...n}));be.displayName=ge.displayName;const Ae=u.forwardRef(({className:t,...n},s)=>e.jsx(he,{ref:s,className:w(G(),t),...n}));Ae.displayName=he.displayName;const De=u.forwardRef(({className:t,...n},s)=>e.jsx(xe,{ref:s,className:w(G({variant:"outline"}),"mt-2 sm:mt-0",t),...n}));De.displayName=xe.displayName;const Ts=(t,n)=>`${t?.charAt(0)||""}${n?.charAt(0)||""}`.toUpperCase();function Ls({filteredDrivers:t,getStatusBadge:n,onUpdateDriver:s}){const i=async l=>{try{await R.delete(`/operator/driver/${l}`),s({drivers_id:l}),E.success("Delete Driver Successfully")}catch(h){console.error("Failed to delete driver",h)}},c=async l=>{try{const h=await R.post(`/operator/driver/${l}/approve`);s(h.data.driver),E.success("Approve Driver Successfully")}catch(h){console.error("Failed to approve driver",h)}},p=async l=>{try{const h=await R.post(`/operator/driver/${l}/reject`);s(h.data.driver),E.success("Reject Driver Successfully")}catch(h){console.error("Failed to reject driver",h)}};return t.length===0?e.jsxs("div",{className:"p-12 text-center text-muted-foreground",children:[e.jsx(J,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No drivers found matching your search or filter"})]}):e.jsxs(z,{children:[e.jsxs(U,{children:[e.jsxs(H,{children:["Jeepney Drivers (",t.length,")"]}),e.jsx(Ie,{children:"Manage modernized jeepney drivers and route assignments"})]}),e.jsx(q,{children:e.jsx("div",{className:"space-y-4",children:t.map(l=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(Fe,{className:"h-12 w-12",children:[e.jsx(Me,{src:l.avatar_url}),e.jsx(Oe,{className:"bg-primary text-primary-foreground",children:Ts(l.first_name,l.last_name)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h3",{className:"font-semibold",children:[l.first_name," ",l.last_name]}),e.jsx(Be,{className:n(l.status).color,children:l.status})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(qe,{className:"h-3 w-3"}),l.email]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ve,{className:"h-3 w-3"}),l.phone]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ge,{className:"h-3 w-3"}),l.route?.first_terminal," ↔ ",l.route?.second_terminal]})]})]})]}),e.jsx("div",{className:"flex items-center gap-6",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(j,{variant:"ghost",size:"sm",children:e.jsx(Je,{className:"h-4 w-4"})}),e.jsx(j,{variant:"ghost",size:"sm",children:e.jsx(xs,{className:"h-4 w-4"})}),e.jsxs(Rs,{children:[e.jsx(Es,{asChild:!0,children:e.jsx(j,{variant:"ghost",size:"sm",children:e.jsx(We,{className:"h-4 w-4"})})}),e.jsxs(ve,{children:[e.jsxs(Ne,{children:[e.jsx(ye,{children:"Delete Driver Account"}),e.jsxs(be,{children:["Are you sure you want to delete ",l.first_name," ",l.last_name,"'s account? This action cannot be undone."]})]}),e.jsxs(we,{children:[e.jsx(De,{children:"Cancel"}),e.jsx(Ae,{onClick:()=>i(l.drivers_id),children:"Delete"})]})]})]}),l.status==="pending"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{variant:"default",size:"sm",onClick:()=>c(l.drivers_id),children:"Approve"}),e.jsx(j,{variant:"destructive",size:"sm",onClick:()=>p(l.drivers_id),children:"Reject"})]})]})})]},l.drivers_id))})})]})}function Fs({searchQuery:t,setSearchQuery:n,selectedStatus:s,setSelectedStatus:i,onExport:c}){return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Qe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(A,{placeholder:"Search drivers by name, route, or terminal...",value:t,onChange:p=>n(p.target.value),className:"pl-10"})]}),e.jsxs(W,{value:s,onValueChange:i,children:[e.jsxs(Q,{className:"w-48",children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),e.jsx(X,{})]}),e.jsxs(Y,{children:[e.jsx(_,{value:"all",children:"All Status"}),e.jsx(_,{value:"active",children:"Active"}),e.jsx(_,{value:"pending",children:"Pending"}),e.jsx(_,{value:"suspended",children:"Suspended"}),e.jsx(_,{value:"inactive",children:"Inactive"})]})]}),e.jsxs(j,{variant:"outline",onClick:c,children:[e.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Export"]})]})}function L({title:t,icon:n,count:s,description:i}){return e.jsxs(z,{children:[e.jsxs(U,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:t}),n]}),e.jsxs(q,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s}),e.jsx("p",{className:"text-xs text-muted-foreground",children:i})]})]})}const Ms=({currentStep:t,totalSteps:n})=>e.jsx("div",{className:"flex items-center justify-center mb-6",children:Array.from({length:n},(s,i)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${i<=t?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:i+1}),i<n-1&&e.jsx("div",{className:`w-12 h-0.5 mx-2 ${i<t?"bg-primary":"bg-muted"}`})]},i))}),Os=({newDriver:t,setNewDriver:n})=>{const[s,i]=u.useState({}),[c,p]=u.useState({}),l=(r,a)=>{let d="";switch(r){case"firstName":a.trim()?a.trim().length<2&&(d="Name must be at least 2 characters"):d="First name is required";break;case"lastName":a.trim()?a.trim().length<2&&(d="Name must be at least 2 characters"):d="Last name is required";break;case"email":a.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)||(d="Please enter a valid email address"):d="Email is required";break;case"phone":a.trim()?/^(\+63|0)?[0-9]{10}$/.test(a.replace(/\s+/g,""))||(d="Please enter a valid Philippine phone number"):d="Phone number is required";break;case"password":a?a.length<8?d="Password must be at least 8 characters":/(?=.*[a-zA-Z])(?=.*[0-9])/.test(a)||(d="Password must contain both letters and numbers"):d="Password is required";break;case"confirmPassword":a?a!==t.password&&(d="Passwords do not match"):d="Please confirm your password";break}return d},h=r=>{p({...c,[r]:!0});const a=l(r,t[r]);i({...s,[r]:a})},x=(r,a)=>{if(n({...t,[r]:a}),c[r]){const d=l(r,a);i({...s,[r]:d})}if(r==="password"&&c.confirmPassword){const d=l("confirmPassword",t.confirmPassword);i({...s,[r]:"",confirmPassword:d})}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(rs,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Personal Information"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"firstName",children:"First Name *"}),e.jsx(A,{id:"firstName",value:t.firstName,onChange:r=>x("firstName",r.target.value),onBlur:()=>h("firstName"),placeholder:"Enter first name",className:s.firstName&&c.firstName?"border-red-500 focus-visible:ring-red-500":""}),s.firstName&&c.firstName&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-500",children:[e.jsx(N,{className:"h-3 w-3"}),e.jsx("span",{children:s.firstName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(A,{id:"lastName",value:t.lastName,onChange:r=>x("lastName",r.target.value),onBlur:()=>h("lastName"),placeholder:"Enter last name",className:s.lastName&&c.lastName?"border-red-500 focus-visible:ring-red-500":""}),s.lastName&&c.lastName&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-500",children:[e.jsx(N,{className:"h-3 w-3"}),e.jsx("span",{children:s.lastName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"email",children:"Email Address *"}),e.jsx(A,{id:"email",type:"email",value:t.email,onChange:r=>x("email",r.target.value),onBlur:()=>h("email"),placeholder:"Enter email address",className:s.email&&c.email?"border-red-500 focus-visible:ring-red-500":""}),s.email&&c.email&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-500",children:[e.jsx(N,{className:"h-3 w-3"}),e.jsx("span",{children:s.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(A,{id:"phone",value:t.phone,onChange:r=>x("phone",r.target.value),onBlur:()=>h("phone"),placeholder:"+63 917 123 4567",className:s.phone&&c.phone?"border-red-500 focus-visible:ring-red-500":""}),s.phone&&c.phone&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-500",children:[e.jsx(N,{className:"h-3 w-3"}),e.jsx("span",{children:s.phone})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"password",children:"Password *"}),e.jsx(A,{id:"password",type:"password",value:t.password,onChange:r=>x("password",r.target.value),onBlur:()=>h("password"),placeholder:"Create password",className:s.password&&c.password?"border-red-500 focus-visible:ring-red-500":""}),s.password&&c.password?e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-500",children:[e.jsx(N,{className:"h-3 w-3"}),e.jsx("span",{children:s.password})]}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"Min. 8 characters with letters and numbers"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"confirmPassword",children:"Confirm Password *"}),e.jsx(A,{id:"confirmPassword",type:"password",value:t.confirmPassword,onChange:r=>x("confirmPassword",r.target.value),onBlur:()=>h("confirmPassword"),placeholder:"Confirm password",className:s.confirmPassword&&c.confirmPassword?"border-red-500 focus-visible:ring-red-500":""}),s.confirmPassword&&c.confirmPassword&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-500",children:[e.jsx(N,{className:"h-3 w-3"}),e.jsx("span",{children:s.confirmPassword})]})]})]})},$s=({newDriver:t,setNewDriver:n})=>{const[s,i]=u.useState({}),[c,p]=u.useState({}),[l,h]=u.useState([]);u.useEffect(()=>{R.get("/routes").then(a=>h(a.data)).catch(a=>console.error(a))},[]);const x=(a,d)=>{let o="";switch(a){case"route":(!d||d.trim()==="")&&(o="Please select a route assignment.");break}return o},r=(a,d)=>{n({...t,[a]:d}),p({...c,[a]:!0});const o=x(a,d);i({...s,[a]:o})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(os,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Route Details"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"route",children:"Assigned Route *"}),e.jsxs(W,{value:t.route,onValueChange:a=>r("route",a),children:[e.jsx(Q,{className:s.route&&c.route?"border-red-500 focus:ring-red-500":"",children:e.jsx(X,{placeholder:"Select route assignment"})}),e.jsx(Y,{children:l.map(a=>e.jsxs(_,{value:a.id.toString(),children:[a.first_terminal," ↔ ",a.second_terminal]},a.id))})]}),s.route&&c.route&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-red-500",children:[e.jsx(N,{className:"h-3 w-3"}),e.jsx("span",{children:s.route})]})]})]})},Bs=({onRegister:t})=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-6",children:[e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("div",{className:"absolute h-36 w-36 bg-green-100 rounded-full"}),e.jsx(K,{className:"h-28 w-28 text-green-600 relative"})]}),e.jsx("h2",{className:"text-3xl font-bold text-green-700 text-center",children:"Driver is Ready to Register"}),e.jsx(j,{size:"lg",onClick:t,children:"Register Driver"})]}),Is=({onCreateDriver:t})=>{const[n,s]=u.useState(!1),[i,c]=u.useState(0),[p,l]=u.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",vehicleType:"",licensePlate:"",route:""}),h=async o=>{try{const m=new FormData;m.append("first_name",o.firstName),m.append("last_name",o.lastName),m.append("email",o.email),m.append("phone",o.phone),m.append("password",o.password),m.append("password_confirmation",o.confirmPassword),m.append("vehicle_type",o.vehicleType),m.append("license_plate",o.licensePlate),m.append("route_id",o.route),await R.post("/operator/driver",m,{headers:{"Content-Type":"multipart/form-data"}}),E.success("Driver Created Successfully"),t(o),s(!1),c(0)}catch(m){console.error(m),E.error("Error Creating Driver")}},x=()=>{i<2&&c(i+1)},r=()=>{i>0&&c(i-1)},a=o=>{switch(o){case 0:return p.firstName&&p.lastName&&p.email&&p.phone&&p.password&&p.confirmPassword;case 1:return!!p.route;case 2:return!0;default:return!1}},d=()=>{switch(i){case 0:return e.jsx(Os,{newDriver:p,setNewDriver:l});case 1:return e.jsx($s,{newDriver:p,setNewDriver:l});case 2:return e.jsx(Bs,{newDriver:p,onRegister:()=>h(p)});default:return null}};return e.jsxs(Ke,{open:n,onOpenChange:s,children:[e.jsx(Ze,{asChild:!0,children:e.jsxs(j,{children:[e.jsx(ns,{className:"h-4 w-4 mr-2"}),"Add New Driver"]})}),e.jsxs(es,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs(ss,{children:[e.jsx(ts,{children:"Register New Jeepney Driver"}),e.jsx(as,{children:"Complete the registration process in 3 simple steps"})]}),e.jsx(Ms,{currentStep:i,totalSteps:3}),d(),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx("div",{children:i>0&&i<2&&e.jsxs(j,{variant:"outline",onClick:r,children:[e.jsx(ds,{className:"h-4 w-4 mr-2"}),"Previous"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),i<2&&e.jsxs(j,{onClick:x,disabled:!a(i),children:["Next",e.jsx(ps,{className:"h-4 w-4 ml-2"})]})]})]})]})]})};var F={exports:{}},zs=F.exports,$;function Us(){return $||($=1,(function(t,n){(function(s,i){i()})(zs,function(){function s(r,a){return typeof a>"u"?a={autoBom:!1}:typeof a!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r}function i(r,a,d){var o=new XMLHttpRequest;o.open("GET",r),o.responseType="blob",o.onload=function(){x(o.response,a,d)},o.onerror=function(){console.error("could not download file")},o.send()}function c(r){var a=new XMLHttpRequest;a.open("HEAD",r,!1);try{a.send()}catch{}return 200<=a.status&&299>=a.status}function p(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(a)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof T=="object"&&T.global===T?T:void 0,h=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),x=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!h?function(r,a,d){var o=l.URL||l.webkitURL,m=document.createElement("a");a=a||r.name||"download",m.download=a,m.rel="noopener",typeof r=="string"?(m.href=r,m.origin===location.origin?p(m):c(m.href)?i(r,a,d):p(m,m.target="_blank")):(m.href=o.createObjectURL(r),setTimeout(function(){o.revokeObjectURL(m.href)},4e4),setTimeout(function(){p(m)},0))}:"msSaveOrOpenBlob"in navigator?function(r,a,d){if(a=a||r.name||"download",typeof r!="string")navigator.msSaveOrOpenBlob(s(r,d),a);else if(c(r))i(r,a,d);else{var o=document.createElement("a");o.href=r,o.target="_blank",setTimeout(function(){p(o)})}}:function(r,a,d,o){if(o=o||open("","_blank"),o&&(o.document.title=o.document.body.innerText="downloading..."),typeof r=="string")return i(r,a,d);var m=r.type==="application/octet-stream",g=/constructor/i.test(l.HTMLElement)||l.safari,C=/CriOS\/[\d]+/.test(navigator.userAgent);if((C||m&&g||h)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var b=y.result;b=C?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=b:location=b,o=null},y.readAsDataURL(r)}else{var f=l.URL||l.webkitURL,P=f.createObjectURL(r);o?o.location=P:location.href=P,o=null,setTimeout(function(){f.revokeObjectURL(P)},4e4)}});l.saveAs=x.saveAs=x,t.exports=x})})(F)),F.exports}var Hs=Us();const qs=[{title:"Driver",href:"/driver"}];function yt({drivers:t}){const[n,s]=u.useState(t),[i,c]=u.useState(""),[p,l]=u.useState("all"),h=o=>{const m={active:{variant:"default",color:"bg-green-100 text-green-800"},pending:{variant:"secondary",color:"bg-yellow-100 text-yellow-800"},suspended:{variant:"destructive",color:"bg-red-100 text-red-800"},inactive:{variant:"outline",color:"bg-gray-100 text-gray-800"}};return m[o]||m.inactive},x=o=>{console.log("Create Driver",o)},r=()=>{if(!n||n.length===0)return;const o=n.map(f=>({ID:f.drivers_id,"First Name":f.first_name,"Last Name":f.last_name,Email:f.email,Phone:f.phone||"",Status:f.status,Route:f.route?`${f.route.first_terminal} ↔ ${f.route.second_terminal}`:"","License Plate":f.license_plate,"Vehicle Type":f.vehicle_type||"",Rating:f.rating})),m=M.json_to_sheet(o),g=M.book_new();M.book_append_sheet(g,m,"Drivers");const C=is(g,{bookType:"xlsx",type:"array"}),y=new Blob([C],{type:"application/octet-stream"});Hs.saveAs(y,`drivers_export_${new Date().toISOString()}.xlsx`)},a=o=>{o&&(o.deleted?s(m=>m.filter(g=>g.drivers_id!==o.drivers_id)):s(m=>m.map(g=>g.drivers_id===o.drivers_id?o:g)))},d=n.filter(o=>{const m=o.first_name??"",g=o.last_name??"",C=o.email??"",y=o.phone??"",f=(o.status??"").toLowerCase(),P=m.toLowerCase().includes(i.toLowerCase())||g.toLowerCase().includes(i.toLowerCase())||C.toLowerCase().includes(i.toLowerCase())||y.includes(i),b=p==="all"||f===p.toLowerCase();return P&&b});return e.jsxs($e,{breadcrumbs:qs,children:[e.jsx(Ce,{title:"Driver Management"}),e.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-primary rounded-xl",children:e.jsx(J,{className:"h-6 w-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx(O,{size:"xl",weight:"bold",children:"Modern Jeepney Driver Management"}),e.jsx(O,{size:"sm",weight:"normal",children:"Manage modernized jeepney drivers in Bacolod City"})]})]}),e.jsx(Is,{onCreateDriver:x})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(L,{title:"Total Jeepney Drivers",icon:e.jsx(gs,{className:"h-4 w-4 text-muted-foreground"}),count:t.length,description:"This includes all registered drivers"}),e.jsx(L,{title:"Active on Routes",icon:e.jsx(K,{className:"h-4 w-4 text-green-500"}),count:t.filter(o=>o.status==="active").length,description:"Operating Routes"}),e.jsx(L,{title:"Pending Approval",icon:e.jsx(ls,{className:"h-4 w-4 text-yellow-500"}),count:t.filter(o=>o.status==="pending").length,description:"Awaiting verification"}),e.jsx(L,{title:"Issues",icon:e.jsx(N,{className:"h-4 w-4 text-red-400"}),count:t.filter(o=>o.status==="suspended").length,description:"Need Attention"})]}),e.jsx(Fs,{searchQuery:i,setSearchQuery:c,selectedStatus:p,setSelectedStatus:l,onExport:r}),e.jsx(Ls,{filteredDrivers:d,getStatusBadge:h,onUpdateDriver:a})]})]})}export{yt as default};
